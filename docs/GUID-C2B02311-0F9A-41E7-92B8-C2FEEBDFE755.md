# Extensible DMA Controller \(XDMAC\)

The DMA Controller \(XDMAC\) can transfer data between memories and<br />peripherals, and thus off-load these tasks from the CPU. It enables<br />high data transfer rates with minimum CPU intervention, and frees up<br />CPU time. With access to all peripherals, the DMAC can handle automatic<br />transfer of data between communication modules. The XDMAC has several<br />DMA channels and each channel is fully programmable and provides both<br />peripheral, or memory-to-memory transfers.

**Using The Library**

The XDMA controller requires a source address, destination address and<br />transfer count to initiate the transfer. It transfers data on each DMA<br />trigger and decrements the transfer count. The DMA generates completion<br />interrupt to notify the CPU at the end of the DMA transfer.

The user can use either the callback mechanism or the polling mechanism<br />to determine DMA completion.

-   With polling, the application will need to continuously poll to<br />check if the DMA has completed the transfer.

-   With callback, the registered callback function will be called when<br />the transfer is completed. This means the application do not have to<br />poll continuously.


**Callback method**

This following example demonstrates a DMA transfer with callback.

```c
#define USART1_TRANSMIT_ADDRESS     (&USART1_REGS->US_THR)

uint8_t txBuffer[] = "Hello World!";

void XDMAC_Callback(XDMAC_TRANSFER_EVENT status, uintptr_t context)
{
      if(status == XDMAC_TRANSFER_COMPLETE)
      {
           // Transfer is completed.
      }
}

 int main ( void )
{
      SYS_Initialize ( NULL );

      XDMAC_ChannelCallbackRegister(XDMAC_CHANNEL_0, XDMAC_Callback, 0);

      XDMAC_ChannelTransfer(XDMAC_CHANNEL_0, txBuffer, (const void *)USART1_TRANSMIT_ADDRESS, sizeof(txBuffer));

}
```

**Polling method**

The following example demonstrates a DMA transfer with polling.

```c
#define USART1_TRANSMIT_ADDRESS     (&USART1_REGS->US_THR)

uint8_t txBuffer[] = "Hello World!";

int main ( void )
{
      SYS_Initialize ( NULL );

      XDMAC_ChannelTransfer(XDMAC_CHANNEL_0, txBuffer, (const void *)USART1_TRANSMIT_ADDRESS, sizeof(txBuffer));

      while(XDMAC_ChannelIsBusy(XDMAC_CHANNEL_0));
}

```

**Library Interface**

Extensible DMA Controller peripheral library provides the following interfaces:

**Functions**

|Name|Description|
|----|-----------|
|XDMAC\_Initialize|Initializes the XDMAC controller of the device|
|XDMAC\_ChannelCallbackRegister|This function allows a XDMAC PLIB client to set an event handler|
|XDMAC\_ChannelTransfer|Adds a data transfer to a XDMAC channel and enables the channel to start data transfer|
|XDMAC\_ChannelLinkedListTransfer|Sets up a multi-block data transfer on a specified XDMAC channel using linked list feature|
|XDMAC\_ChannelIsBusy|Returns the busy status of a specific XDMAC Channel|
|XDMAC\_ChannelTransferStatusGet|Returns the XDMAC channel's transfer status|
|XDMAC\_ChannelDisable|Disables the specified channel|
|XDMAC\_ChannelSettingsGet|Returns the channel settings of a specific XDMAC Channel|
|XDMAC\_ChannelSettingsSet|Sets the channel settings of a specific XDMAC Channel|
|XDMAC\_ChannelBlockLengthSet|Sets the channel Block Length of a specific XDMAC Channel|
|XDMAC\_ChannelSuspend|This function Suspends the DMA channel|
|XDMAC\_ChannelResume|This function Resumes the DMA channel|

**Data types and constants**

|Name|Type|Description|
|----|----|-----------|
|XDMAC\_CHANNEL|Enum|Lists the set of channels available for data transfer using DMAC|
|XDMAC\_TRANSFER\_EVENT|Enum|Enumeration of possible DMAC transfer events|
|XDMAC\_CHANNEL\_CALLBACK|Typedef|Pointer to a DMAC Transfer Event handler function|
|XDMAC\_CHANNEL\_CONFIG|Typedef|DMAC Block Transfer Control configuration value|
|XDMAC\_DESCRIPTOR\_CONTROL|Union|Defines the descriptor control for linked list operation|
|XDMAC\_DESCRIPTOR\_VIEW\_0|Struct|Defines the descriptor view 0 available for master transfer|
|XDMAC\_DESCRIPTOR\_VIEW\_1|Struct|Defines the descriptor view 1 available for master transfer|
|XDMAC\_DESCRIPTOR\_VIEW\_2|Struct|Defines the descriptor view 2 available for master transfer|
|XDMAC\_DESCRIPTOR\_VIEW\_3|Struct|Defines the descriptor view 3 available for master transfer|
|XDMAC\_MICRO\_BLOCK\_CONTROL|Struct|Defines the control parameters for linked list operation|

-   **[XDMACn\_Initialize Function](GUID-C6827694-6FBC-45DE-BEAF-2203D8FBFA4E.md)**  

-   **[XDMACn\_ChannelCallbackRegister Function](GUID-7BD96BAC-1D5A-4E4E-A61D-0DAC20DB9B5C.md)**  

-   **[XDMACn\_ChannelTransfer Function](GUID-2502F03C-C26C-4550-AF8C-B101BC014AD7.md)**  

-   **[XDMACn\_ChannelLinkedListTransfer Function](GUID-813F1FF6-7F26-446D-96BA-ED2FDE6535B1.md)**  

-   **[XDMACn\_ChannelIsBusy Function](GUID-956FA95B-1FB3-4CBE-8A8A-F1E534FEDED2.md)**  

-   **[XDMACn\_ChannelTransferStatusGet Function](GUID-B5407C31-8913-4E18-A754-94FA4E2BDEEF.md)**  

-   **[XDMACn\_ChannelDisable Function](GUID-E3305F7E-9906-4A57-A00D-BD5F46F69812.md)**  

-   **[XDMACn\_ChannelSettingsGet Function](GUID-DFC19E24-FF64-4555-9EE7-0880D6B3FEAF.md)**  

-   **[XDMACn\_ChannelSettingsSet Function](GUID-22479D12-D3A6-4D95-A79B-012B09CE61A0.md)**  

-   **[XDMACn\_ChannelBlockLengthSet Function](GUID-07A683EF-6306-4F00-A123-E62B37E4ABF7.md)**  

-   **[XDMACn\_ChannelSuspend Function](GUID-3791EE1D-D804-4AA4-8243-BD9070C8AB65.md)**  

-   **[XDMACn\_ChannelResume Function](GUID-BD9840DE-499B-40C7-AC85-D9A6DB04745B.md)**  

-   **[XDMAC\_CHANNEL Enum](GUID-10541C28-13E5-468F-9649-042B3302F2F6.md)**  

-   **[XDMAC\_TRANSFER\_EVENT Enum](GUID-4CC9F812-0A6D-426D-A9E7-6FE0077AB048.md)**  

-   **[XDMAC\_CHANNEL\_CALLBACK Typedef](GUID-93FED48E-60AF-479A-AC03-54A6D9519CB6.md)**  

-   **[XDMAC\_CHANNEL\_CONFIG Typedef](GUID-F1E6450F-C047-4825-B63A-6525351B40C7.md)**  

-   **[XDMAC\_DESCRIPTOR\_CONTROL Union](GUID-B9FB7E7F-1DF2-4965-96A7-580235595904.md)**  

-   **[XDMAC\_DESCRIPTOR\_VIEW\_0 Struct](GUID-0DC9A01D-1AD6-4C4A-A510-0BD2AFD14986.md)**  

-   **[XDMAC\_DESCRIPTOR\_VIEW\_1 Struct](GUID-F5DC0D8A-3B8A-4C45-845C-AAF7CFE36A86.md)**  

-   **[XDMAC\_DESCRIPTOR\_VIEW\_2 Struct](GUID-0204AE28-AE5D-41BC-93E5-F759193DE23C.md)**  

-   **[XDMAC\_DESCRIPTOR\_VIEW\_3 Struct](GUID-75B3FE35-AD7B-4A79-BFEB-6028B1D0928A.md)**  

-   **[XDMAC\_MICRO\_BLOCK\_CONTROL Struct](GUID-E0E13210-BF34-48D7-A324-86411809942F.md)**  


**Parent topic:**[SAM 9X60 Peripheral Libraries](GUID-CCAAC7F0-6BA8-4630-91AE-69718D188CBF.md)

**Parent topic:**[SAM 9X7 Peripheral Libraries](GUID-FB6741AA-355E-483F-9727-37728953D583.md)

**Parent topic:**[SAM A5D2 Peripheral Libraries](GUID-F6605EDC-FC71-4081-8560-0C1681C1FA8D.md)

**Parent topic:**[SAM A7G5 Peripheral Libraries](GUID-7EEB1AC5-4BFF-4259-97AD-8CF7367D7973.md)

**Parent topic:**[SAM E70 S70 V70 V71 Peripheral Libraries](GUID-6E45C146-6F6D-452A-A2E2-228C3CC905D7.md)

**Parent topic:**[SAM RH707 Peripheral Libraries](GUID-C2AC236D-363B-4378-A381-B281F67C8647.md)

**Parent topic:**[SAM RH71 Peripheral Libraries](GUID-AC9BE324-E486-46EA-8D16-E04E15288053.md)

