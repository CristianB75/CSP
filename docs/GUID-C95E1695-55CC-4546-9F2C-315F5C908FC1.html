<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE11" /><meta name="copyright" content="(C) Copyright 2022" />
<meta name="DC.rights.owner" content="(C) Copyright 2022" />
<meta name="DC.type" content="topic" />
<meta name="DC.title" content="Real-Time Counter (RTC)" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="real-time-counter-rtc" />
<link rel="stylesheet" type="text/css" href="stylesheets/commonltr.css" />
<link rel="stylesheet" type="text/css" href="stylesheets/atmel.css" />
<link rel="stylesheet" type="text/css" href="./stylesheets/common-extended.css" /><title>Real-Time Counter (RTC)</title>
<meta name="Microsoft.Help.Id" content="GUID-1EA9B250-D935-443A-9FA9-C48E50D229E8-real-time-counter-rtc" />
<meta name="Microsoft.Help.TocParent" content="GUID-1EA9B250-D935-443A-9FA9-C48E50D229E8" />
<meta name="Microsoft.Help.TocOrder" content="0" />
<meta name="Microsoft.Help.Locale" content="en-US" />
<meta name="Microsoft.Help.TopicLocale" content="en-US" />
<meta name="Microsoft.Help.DisplayVersion" content="MPLABÂ® Harmony Peripheral Libraries Reference A 09/2021" />
<script language="javascript">
       
       if (window.parent.location.protocol != 'file:') {
				document.addEventListener('click', function(e) {
				    if (e.target) {
               if (e.target.nodeName == "A" ) {
                    if (!e.target.target) {
                      e.preventDefault();
                      e.stopPropagation();
                              
                      var origUrl = window.parent.location.href.substr(0, window.parent.location.href.indexOf("?"));
                      if (origUrl.length === 0) {
                          origUrl = window.parent.location.href;
                      }
                      var href= e.target.getAttribute("href");
                      var parts = href.split("#");
          
                      var url = "";
                      if (parts.length == 2 ) {
                        if (!parts[0].length) {
                            url = window.parent.location.search.replace('?','')
                        } else {
                            url = parts[0].replace('.html','');
                        }
                      } else {
                        url = parts[0].replace('.html','');
                      }

                      if (parts.length == 2) {
                          url += "#" + parts[1];
                      }
    
                      window.parent.location.href = origUrl + "?" + url;

                      return false;
                    }
               }
            }
				});
			}

		</script><script language="javascript">
        function cpy(id, button) {
        
            var element = document.getElementById(id);
            var content = element.getAttribute("content");
            var textArea = document.createElement("textarea");
            
            // Place in the top-left corner of screen regardless of scroll position.
            textArea.style.position = 'fixed';
            textArea.style.top = 0;
            textArea.style.left = 0;
            
            // Ensure it has a small width and height. Setting to 1px / 1em
            // doesn't work as this gives a negative w/h on some browsers.
            textArea.style.width = '2em';
            textArea.style.height = '2em';
            
            // We don't need padding, reducing the size if it does flash render.
            textArea.style.padding = 0;
            
            // Clean up any borders.
            textArea.style.border = 'none';
            textArea.style.outline = 'none';
            textArea.style.boxShadow = 'none';
            
            // Avoid flash of the white box if rendered for any reason.
            textArea.style.background = 'transparent';
            
            
            textArea.value = content;
            
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
               var successful = document.execCommand('copy');
               var msg = successful ? 'successful' : 'unsuccessful';
               if (!button.classList.contains("copied")){
                  button.textContent = "Copied";
                  button.classList.add("copied");
                  setTimeout(function(){
                    button.textContent = "Copy";
                    button.classList.remove("copied");
                  },1000);
               }
            } catch (err) {
              console.log('Oops, unable to copy');
            }
            
            document.body.removeChild(textArea);
        }
      </script><script language="javascript">
          
          // Add the MathML namespace to html
          var html = document.getElementsByTagName("html")[0],
          head = document.getElementsByTagName("head")[0];
          
          var mathJax = document.createElement("script");
          mathJax.src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML";
          head.appendChild(mathJax);
          
          html.setAttribute("xmlns:m","http://www.w3.org/1998/Math/MathML");
          
          function inIframe() { try { return window.self !== window.top; } catch (e) { return true; } }
          
          if (!inIframe()) { 
          
          var Default = "index.html?GUID-C95E1695-55CC-4546-9F2C-315F5C908FC1"; 
          
          var displaylocation = "value" + window.location.href;
          
          var GUIDS = displaylocation.split('GUID');          
          
          if (displaylocation.indexOf('#GUID') != -1) {            
          var First = GUIDS[1].split('.html');  
          if (GUIDS[3]){First = GUIDS[2].split('.html');}
          if (GUIDS[4]){First = GUIDS[3].split('.html');}
          if (GUIDS[5]){First = GUIDS[4].split('.html');}
          
          var Second = GUIDS[2].split('#');   
          if (GUIDS[3]){Second = GUIDS[3].split('#');}
          if (GUIDS[4]){Second = GUIDS[4].split('#');}
          if (GUIDS[5]){Second = GUIDS[5].split('#');}
          
          Default = "index.html?" + "GUID" + First[0] + "GUID" + Second[0];     
          }                    
          window.top.location = Default;
          }       
          
        </script><style xml:space="">
        
          button.copy-code{
            display:none;
            padding:0.7em 1.4em;
            margin:0 0.3em 0.3em 0;
            border-radius:0.15em;
            box-sizing: border-box;
            text-decoration:none;
            font-family:'Roboto',sans-serif;
            text-transform:uppercase;
            font-weight:400;
            color:#FFFFFF;
            background-color:#9c9c9c;
            box-shadow:inset 0 -0.6em 0 -0.35em rgba(0,0,0,0.17);
            text-align:center;
            position:relative;
            border: 0;
            float: right;
            border-radius: .5em;
            cursor: pointer;
          }
          button.copy-code:active{
            top:0.1em;
          }
          
          pre:hover button.copy-code{
            display: inline-block !important;
          }
          button.copy-code.copied {
            cursor: default !important;
          }
          
          
          @media all and (max-width:30em){
            button.copy-code{
              display:block;
              margin:0.4em auto;
            }
          }
        
        
      </style></head>
<body id="real-time-counter-rtc">
<h1 class="title topictitle1" id="ariaid-title1">Real-Time Counter (RTC)</h1><div class="body"><p class="p">RTC module is a 32-bit counter, with a 10-bit programmable prescaler. Typically, RTC clock is run continuously, including in the device's low-power sleep modes, to track the current time and date information. The RTC can be used as a source to wake up the system at a scheduled time or periodically using the alarm functions.
RTC peripheral can be configured to operate in the following three modes:</p>
<ul class="ul"><li class="li"><p class="p">16-bit Counter mode (or Timer mode)</p>
</li>
<li class="li"><p class="p">32-bit Counter mode (or Timer mode)</p>
</li>
<li class="li"><p class="p">Clock and Calendar mode</p>
</li>
</ul>
<p class="p">RTC peripheral in 16-bit or 32-counter mode allows for an easy integration of an asynchronous counter into a user application, which is capable of operating while the device is in sleep mode.
The RTC peripheral in calendar mode allows for an easy integration of a real time clock and calendar into a user application to track the passing of time and/or perform scheduled tasks.</p>
<p class="p"><strong class="ph b"> 32 bit timer mode (Mode 0)</strong></p>
<p class="p">RTC counter in 32-bit timer mode will increment until it reaches the top value of 0xFFFFFFFF, and then wrap to 0x00000000 and sets the overflow interrupt. The counter value is continuously compared with the 32-bit Compare register, and sets the compare match interrupt when compare match occurs. If the Clear on compare match is selected, the counter is cleared when a compare match occurs. Both compare match and overflow interrupt is set on compare match. Clear on compare match feature allow the RTC to generate periodic interrupts or events with longer periods than the prescaler events.</p>
<p class="p"><strong class="ph b">Using The Library</strong></p>
<p class="p">The peripheral library provides polling and callback methods to
indicate compare match or timer overflow.</p>
<ul class="ul"><li class="li"><p class="p">With polling, the application will need to continuously poll to check if the compare match has occurred or timer has overflowed</p>
</li>
<li class="li"><p class="p">With callback, the registered callback function will be called when the compare match occurs or timer overflows. This means the application do not have to poll continuously</p>
</li>
</ul>
<p class="p"><strong class="ph b">Callback method</strong></p>
<p class="p">This example demonstrates how to use RTC to generate periodic callback
using clear on compare feature.</p>
<pre class="pre codeblock language-c"><button title="Copy Code" class="copy-code" onclick="cpy('d751202e46', this);">Copy</button><code id="d751202e46" content="/* This function is called after period expires */&#xA;void Timeout_Handler(RTC_TIMER32_INT_MASK intCause, uintptr_t context)&#xA;{&#xA;    if(RTC_TIMER32_INT_MASK_COMPARE_MATCH  == (RTC_TIMER32_INT_MASK_COMPARE_MATCH &amp; intCause ))&#xA;    {&#xA;        LED_Toggle();&#xA;    }&#xA;}&#xA;&#xA;int main(void)&#xA;{&#xA;    /* Initialize all modules */&#xA;    SYS_Initialize ( NULL );&#xA;    RTC_Timer32CallbackRegister(Timeout_Handler,0);&#xA;    RTC_Timer32InterruptEnable(RTC_TIMER32_INT_MASK_COMPARE_MATCH);&#xA;    RTC_Timer32Start();&#xA;}"><span class="ph token comment">/* This function is called after period expires */</span>
<span class="ph token keyword">void</span> <span class="ph token function">Timeout_Handler</span><span class="ph token punctuation">(</span>RTC_TIMER32_INT_MASK intCause<span class="ph token punctuation">,</span> uintptr_t context<span class="ph token punctuation">)</span>
<span class="ph token punctuation">{</span>
    <span class="ph token keyword">if</span><span class="ph token punctuation">(</span>RTC_TIMER32_INT_MASK_COMPARE_MATCH  <span class="ph token operator">==</span> <span class="ph token punctuation">(</span>RTC_TIMER32_INT_MASK_COMPARE_MATCH <span class="ph token operator">&amp;</span> intCause <span class="ph token punctuation">)</span><span class="ph token punctuation">)</span>
    <span class="ph token punctuation">{</span>
        <span class="ph token function">LED_Toggle</span><span class="ph token punctuation">(</span><span class="ph token punctuation">)</span><span class="ph token punctuation">;</span>
    <span class="ph token punctuation">}</span>
<span class="ph token punctuation">}</span>

<span class="ph token keyword">int</span> <span class="ph token function">main</span><span class="ph token punctuation">(</span><span class="ph token keyword">void</span><span class="ph token punctuation">)</span>
<span class="ph token punctuation">{</span>
    <span class="ph token comment">/* Initialize all modules */</span>
    SYS_Initialize <span class="ph token punctuation">(</span> <span class="ph token constant">NULL</span> <span class="ph token punctuation">)</span><span class="ph token punctuation">;</span>
    <span class="ph token function">RTC_Timer32CallbackRegister</span><span class="ph token punctuation">(</span>Timeout_Handler<span class="ph token punctuation">,</span><span class="ph token number">0</span><span class="ph token punctuation">)</span><span class="ph token punctuation">;</span>
    <span class="ph token function">RTC_Timer32InterruptEnable</span><span class="ph token punctuation">(</span>RTC_TIMER32_INT_MASK_COMPARE_MATCH<span class="ph token punctuation">)</span><span class="ph token punctuation">;</span>
    <span class="ph token function">RTC_Timer32Start</span><span class="ph token punctuation">(</span><span class="ph token punctuation">)</span><span class="ph token punctuation">;</span>
<span class="ph token punctuation">}</span></code></pre><p class="p"><strong class="ph b">Library Interface</strong></p>
<p class="p">Real-Time Counter peripheral library provides the following interfaces:</p>
<p class="p"><strong class="ph b">Functions</strong></p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><col style="width:" /><col style="width:" /><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="text-align:left;vertical-align:middle;" id="d751202e189"><span>Name</span></th>
<th class="entry cellrowborder" style="text-align:left;vertical-align:middle;" id="d751202e191"><span>Description</span></th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e189 "><span>RTC_Initialize</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e191 "><span>Initialize given instance of the RTC peripheral</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e189 "><span>RTC_Timer32CompareHasMatched</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e191 "><span>Check for 32-bit Timer Compare match</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e189 "><span>RTC_Timer32CounterHasOverflowed</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e191 "><span>Check if the 32-bit counter overflow</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e189 "><span>RTC_Timer32Start</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e191 "><span>Starts the 32-bit timer</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e189 "><span>RTC_Timer32Stop</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e191 "><span>Stops the 32-bit timer from counting</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e189 "><span>RTC_Timer32CounterSet</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e191 "><span>Set the 32-bit Timer Counter Value</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e189 "><span>RTC_Timer32CompareSet</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e191 "><span>Set the 32-bit timer period value</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e189 "><span>RTC_Timer32PeriodGet</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e191 "><span>Get 32-bit timer period Value</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e189 "><span>RTC_Timer32CounterGet</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e191 "><span>Get the current 32-bit counter value</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e189 "><span>RTC_Timer32FrequencyGet</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e191 "><span>Returns the frequency at which the 32-bit timer counter is operating</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e189 "><span>RTC_Timer32InterruptEnable</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e191 "><span>Enable selected RTC interrupt</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e189 "><span>RTC_Timer32InterruptDisable</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e191 "><span>Disable selected RTC interrupt</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e189 "><span>RTC_Timer32CallbackRegister</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e191 "><span>Register the callback function to be called when an 32-bit Timer Interrupt occurs</span></td>
</tr>
</tbody>
</table>
</div>
<p class="p"><strong class="ph b">Data types and constants</strong></p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><col style="width:" /><col style="width:" /><col style="width:" /><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="text-align:left;vertical-align:middle;" id="d751202e270"><span>Name</span></th>
<th class="entry cellrowborder" style="text-align:left;vertical-align:middle;" id="d751202e272"><span>Type</span></th>
<th class="entry cellrowborder" style="text-align:left;vertical-align:middle;" id="d751202e274"><span>Description</span></th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e270 "><span>RTC_TIMER32_INT_MASK</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e272 "><span>Enum</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e274 "><span>Possible RTC 32-bit Timer Counter Mode Events</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e270 "><span>RTC_TIMER32_CALLBACK</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e272 "><span>Typedef</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e274 "><span>Defines the data type and function signature of the RTC 32-bit Timer Counter callback function</span></td>
</tr>
</tbody>
</table>
</div>
<p class="p"><strong class="ph b"> 16 bit timer mode (Mode 1)</strong></p>
<p class="p">The RTC counter in 16-bit timer mode will increment until it matches with 16-bit period value, and then wrap to 0x0000. This sets the the overflow interrupt.
The counter value is continuously compared with two 32-bit Compare registers (Compare 0, Compare 1), and sets the respective compare match interrupt when compare match occurs.</p>
<p class="p"><strong class="ph b">Using The Library</strong></p>
<p class="p">The peripheral library provides polling and callback methods to indicate compare match or period expiry.
With polling, the application will need to continuously poll to check if the compare match has occurred or counter has overflowed.
With callback, the registered callback function will be called when the period match or compare match occurs. This means the application do not have to poll continuously.</p>
<p class="p"><strong class="ph b">Callback method</strong></p>
<p class="p">This example demonstrates how to use RTC to generate periodic callback.</p>
<pre class="pre codeblock language-c"><button title="Copy Code" class="copy-code" onclick="cpy('d751202e307', this);">Copy</button><code id="d751202e307" content="&#xA;/* This function is called after period expires */&#xA;void RTC_Callback(RTC_TIMER16_INT_MASK interruptCause, uintptr_t context)&#xA;{&#xA;&#xA;    if(interruptCause &amp;  RTC_TIMER16_INT_MASK_PERIOD_MATCH)&#xA;    {&#xA;        // The period has matched.&#xA;        LED_Toggle();&#xA;    }&#xA;&#xA;}&#xA;&#xA;int main(void)&#xA;{&#xA;&#xA;    /* Register callback function for RTC */&#xA;    RTC_Timer16CallbackRegister(RTC_Callback, (uintptr_t)NULL);&#xA;&#xA;    /* Enable Period Interrupt */&#xA;    RTC_Timer16InterruptEnable(RTC_TIMER16_INT_MASK_PERIOD_MATCH);&#xA;&#xA;    /* Start RTC Timer */&#xA;    RTC_Timer16Start();&#xA;}">
<span class="ph token comment">/* This function is called after period expires */</span>
<span class="ph token keyword">void</span> <span class="ph token function">RTC_Callback</span><span class="ph token punctuation">(</span>RTC_TIMER16_INT_MASK interruptCause<span class="ph token punctuation">,</span> uintptr_t context<span class="ph token punctuation">)</span>
<span class="ph token punctuation">{</span>

    <span class="ph token keyword">if</span><span class="ph token punctuation">(</span>interruptCause <span class="ph token operator">&amp;</span>  RTC_TIMER16_INT_MASK_PERIOD_MATCH<span class="ph token punctuation">)</span>
    <span class="ph token punctuation">{</span>
        <span class="ph token comment">// The period has matched.</span>
        <span class="ph token function">LED_Toggle</span><span class="ph token punctuation">(</span><span class="ph token punctuation">)</span><span class="ph token punctuation">;</span>
    <span class="ph token punctuation">}</span>

<span class="ph token punctuation">}</span>

<span class="ph token keyword">int</span> <span class="ph token function">main</span><span class="ph token punctuation">(</span><span class="ph token keyword">void</span><span class="ph token punctuation">)</span>
<span class="ph token punctuation">{</span>

    <span class="ph token comment">/* Register callback function for RTC */</span>
    <span class="ph token function">RTC_Timer16CallbackRegister</span><span class="ph token punctuation">(</span>RTC_Callback<span class="ph token punctuation">,</span> <span class="ph token punctuation">(</span>uintptr_t<span class="ph token punctuation">)</span><span class="ph token constant">NULL</span><span class="ph token punctuation">)</span><span class="ph token punctuation">;</span>

    <span class="ph token comment">/* Enable Period Interrupt */</span>
    <span class="ph token function">RTC_Timer16InterruptEnable</span><span class="ph token punctuation">(</span>RTC_TIMER16_INT_MASK_PERIOD_MATCH<span class="ph token punctuation">)</span><span class="ph token punctuation">;</span>

    <span class="ph token comment">/* Start RTC Timer */</span>
    <span class="ph token function">RTC_Timer16Start</span><span class="ph token punctuation">(</span><span class="ph token punctuation">)</span><span class="ph token punctuation">;</span>
<span class="ph token punctuation">}</span></code></pre><p class="p"><strong class="ph b">Library Interface</strong></p>
<p class="p">Real-Time Counter peripheral library provides the following interfaces:</p>
<p class="p"><strong class="ph b">Functions</strong></p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><col style="width:" /><col style="width:" /><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="text-align:left;vertical-align:middle;" id="d751202e446"><span>Name</span></th>
<th class="entry cellrowborder" style="text-align:left;vertical-align:middle;" id="d751202e448"><span>Description</span></th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e446 "><span>RTC_Initialize</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e448 "><span>Initialize given instance of the RTC peripheral</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e446 "><span>RTC_Timer16CounterHasOverflowed</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e448 "><span>Checks if the 16-bit counter has overflowed</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e446 "><span>RTC_Timer16Compare0HasMatched</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e448 "><span>Returns true if the 16-bit Timer Compare 0 value has matched the counter</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e446 "><span>RTC_Timer16Compare1HasMatched</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e448 "><span>Returns true if the 16-bit Timer Compare 1 value has matched the counter</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e446 "><span>RTC_Timer16Start</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e448 "><span>Starts the 16-bit timer</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e446 "><span>RTC_Timer16Stop</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e448 "><span>Stops the 16-bit timer from counting</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e446 "><span>RTC_Timer16CounterSet</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e448 "><span>Set the 16-bit Timer Counter Value</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e446 "><span>RTC_Timer16PeriodSet</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e448 "><span>Set the 16-bit timer period value</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e446 "><span>RTC_Timer16PeriodGet</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e448 "><span>Get 16-bit timer period Value</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e446 "><span>RTC_Timer16CounterGet</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e448 "><span>Get the current 16-bit counter value</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e446 "><span>RTC_Timer16FrequencyGet</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e448 "><span>Returns the frequency at which the 16-bit timer counter is operating</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e446 "><span>RTC_Timer16InterruptEnable</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e448 "><span>Enable Selected RTC interrupt</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e446 "><span>RTC_Timer16InterruptDisable</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e448 "><span>Disable Selected RTC Interrupt</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e446 "><span>RTC_Timer16Compare0Set</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e448 "><span>Set the 16-Bit Counter Compare 0 Value</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e446 "><span>RTC_Timer16Compare1Set</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e448 "><span>Set the 16-Bit Counter Compare 1 Value</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e446 "><span>RTC_Timer16CallbackRegister</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e448 "><span>Register the callback function to be called when an 16-bit Timer Interrupt occurs</span></td>
</tr>
</tbody>
</table>
</div>
<p class="p"><strong class="ph b">Data types and constants</strong></p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><col style="width:" /><col style="width:" /><col style="width:" /><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="text-align:left;vertical-align:middle;" id="d751202e542"><span>Name</span></th>
<th class="entry cellrowborder" style="text-align:left;vertical-align:middle;" id="d751202e544"><span>Type</span></th>
<th class="entry cellrowborder" style="text-align:left;vertical-align:middle;" id="d751202e546"><span>Description</span></th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e542 "><span>RTC_TIMER16_INT_MASK</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e544 "><span>Enum</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e546 "><span>Possible RTC 16-bit Timer Counter Mode Events</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e542 "><span>RTC_TIMER16_CALLBACK</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e544 "><span>Typedef</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e546 "><span>Defines the data type and function signature of the RTC 16-bit Timer Counter callback function</span></td>
</tr>
</tbody>
</table>
</div>
<p class="p"><strong class="ph b"> Clock and calendar mode (Mode 2)</strong></p>
<p class="p">The RTC provides a full binary-coded decimal (BCD) clock that includes century (19/20), year (with leap years), month, day, hours, minutes, and seconds. The RTC can operate in 24-hour mode or in 12-hour mode with an AM/PM indicator.
The RTC continues to run in the device's low-power sleep modes, to track the current time and date information. The RTC can be used as a source to wake up the system at a scheduled time or periodically using the alarm functions.</p>
<p class="p"><strong class="ph b">Using The Library</strong></p>
<p class="p">The RTC keeps track of the current time and generates an alarm at the desired time. The RTC Alarm has six programmable fields: year, month, date, hours, minutes, and seconds.
The alarm mask allows following options to generate alarm.</p>
<ul class="ul"><li class="li"><p class="p">Alarm mask to compare seconds field (SS): Generates alarm once per minute</p>
</li>
<li class="li"><p class="p">Alarm mask to compare minutes and seconds field (MMSS): Generates alarm once per hour</p>
</li>
<li class="li"><p class="p">Alarm mask to compare hours, minutes and seconds field (HHMMSS): Generates alarm once per day</p>
</li>
<li class="li"><p class="p">Alarm mask to compare date, hours, minutes, and seconds field (DDHHMMSS): Generates alarm once per month</p>
</li>
<li class="li"><p class="p">Alarm mask to compare month, date, hours, minutes and seconds (MMDDHHMMSS): Generates alarm once per year</p>
</li>
<li class="li"><p class="p">Alarm mask to compare year, month, date, hours, minutes and seconds (YYMMDDHHMMSS): Generates alarm on exact day and time.</p>
</li>
</ul>
<p class="p">This example demonstrates how to set the RTC time, and alarm time to generate an alarm interrupt at the desired time of the day.</p>
<pre class="pre codeblock language-c"><button title="Copy Code" class="copy-code" onclick="cpy('d751202e595', this);">Copy</button><code id="d751202e595" content="bool alarm_triggered;&#xA;&#xA;void RTC_Callback(RTC_CLOCK_INT_MASK int_cause , uintptr_t  context)&#xA;{&#xA;    if (int_cause &amp; RTC_CLOCK_INT_MASK_ALARM)&#xA;    {&#xA;        alarm_triggered = true;&#xA;        LED_Toggle();&#xA;    }&#xA;}&#xA;&#xA;int main ( void )&#xA;{&#xA;    /* Initialize System Time and Alarm Time */&#xA;    struct tm sys_time;&#xA;    struct tm alarm_time;&#xA;&#xA;    /* Register Callback */&#xA;    RTC_CallbackRegister(RTC_Callback, (uintptr_t) NULL);&#xA;&#xA;&#xA;    /* Set Time and date&#xA;      15-01-2018 12:00:00 Monday */&#xA;    sys_time.tm_hour = 12;      /* hour [0,23] */&#xA;    sys_time.tm_sec = 00;       /* seconds [0,61] */&#xA;    sys_time.tm_min = 00;       /* minutes [0,59] */&#xA;    sys_time.tm_mon = 0;        /* month of year [0,11] */&#xA;    sys_time.tm_year = 118;     /* years since 1900 */&#xA;    sys_time.tm_mday = 15;      /* day of month [1,31] */&#xA;    sys_time.tm_wday = 1;       /* day of week [0,6] (Sunday = 0) */&#xA;                                /* tm_yday - day of year [0,365] */&#xA;                                /* tm_isdst - daylight savings flag */&#xA;&#xA;    RTC_TimeSet(&amp;sys_time);&#xA;&#xA;&#xA;    /* Set Alarm Time and date. Generate alarm every day when Hour, Minute and Seconds match.&#xA;       15-01-2018 12:00:20 Monday */&#xA;    alarm_time.tm_hour = 12;&#xA;    alarm_time.tm_sec = 20;&#xA;    alarm_time.tm_min = 00;&#xA;    alarm_time.tm_mon = 0;&#xA;    alarm_time.tm_year = 118;&#xA;    alarm_time.tm_mday = 15;&#xA;    alarm_time.tm_wday = 1;&#xA;&#xA;    RTC_RTCCAlarmSet(&amp;alarm_time, RTC_ALARM_MASK_HHMMSS);&#xA;&#xA;&#xA;    while ( true )&#xA;    {&#xA;        if(alarm_triggered == true)&#xA;        {&#xA;            printf(&#34;\n\rAlarm Triggered !!!!!!!!\n\r&#34;);&#xA;            alarm_triggered = false;&#xA;        }&#xA;    }&#xA;&#xA;}">bool alarm_triggered<span class="ph token punctuation">;</span>

<span class="ph token keyword">void</span> <span class="ph token function">RTC_Callback</span><span class="ph token punctuation">(</span>RTC_CLOCK_INT_MASK int_cause <span class="ph token punctuation">,</span> uintptr_t  context<span class="ph token punctuation">)</span>
<span class="ph token punctuation">{</span>
    <span class="ph token keyword">if</span> <span class="ph token punctuation">(</span>int_cause <span class="ph token operator">&amp;</span> RTC_CLOCK_INT_MASK_ALARM<span class="ph token punctuation">)</span>
    <span class="ph token punctuation">{</span>
        alarm_triggered <span class="ph token operator">=</span> true<span class="ph token punctuation">;</span>
        <span class="ph token function">LED_Toggle</span><span class="ph token punctuation">(</span><span class="ph token punctuation">)</span><span class="ph token punctuation">;</span>
    <span class="ph token punctuation">}</span>
<span class="ph token punctuation">}</span>

<span class="ph token keyword">int</span> main <span class="ph token punctuation">(</span> <span class="ph token keyword">void</span> <span class="ph token punctuation">)</span>
<span class="ph token punctuation">{</span>
    <span class="ph token comment">/* Initialize System Time and Alarm Time */</span>
    <span class="ph token keyword">struct</span> <span class="ph token class-name">tm</span> sys_time<span class="ph token punctuation">;</span>
    <span class="ph token keyword">struct</span> <span class="ph token class-name">tm</span> alarm_time<span class="ph token punctuation">;</span>

    <span class="ph token comment">/* Register Callback */</span>
    <span class="ph token function">RTC_CallbackRegister</span><span class="ph token punctuation">(</span>RTC_Callback<span class="ph token punctuation">,</span> <span class="ph token punctuation">(</span>uintptr_t<span class="ph token punctuation">)</span> <span class="ph token constant">NULL</span><span class="ph token punctuation">)</span><span class="ph token punctuation">;</span>


    <span class="ph token comment">/* Set Time and date
      15-01-2018 12:00:00 Monday */</span>
    sys_time<span class="ph token punctuation">.</span>tm_hour <span class="ph token operator">=</span> <span class="ph token number">12</span><span class="ph token punctuation">;</span>      <span class="ph token comment">/* hour [0,23] */</span>
    sys_time<span class="ph token punctuation">.</span>tm_sec <span class="ph token operator">=</span> <span class="ph token number">00</span><span class="ph token punctuation">;</span>       <span class="ph token comment">/* seconds [0,61] */</span>
    sys_time<span class="ph token punctuation">.</span>tm_min <span class="ph token operator">=</span> <span class="ph token number">00</span><span class="ph token punctuation">;</span>       <span class="ph token comment">/* minutes [0,59] */</span>
    sys_time<span class="ph token punctuation">.</span>tm_mon <span class="ph token operator">=</span> <span class="ph token number">0</span><span class="ph token punctuation">;</span>        <span class="ph token comment">/* month of year [0,11] */</span>
    sys_time<span class="ph token punctuation">.</span>tm_year <span class="ph token operator">=</span> <span class="ph token number">118</span><span class="ph token punctuation">;</span>     <span class="ph token comment">/* years since 1900 */</span>
    sys_time<span class="ph token punctuation">.</span>tm_mday <span class="ph token operator">=</span> <span class="ph token number">15</span><span class="ph token punctuation">;</span>      <span class="ph token comment">/* day of month [1,31] */</span>
    sys_time<span class="ph token punctuation">.</span>tm_wday <span class="ph token operator">=</span> <span class="ph token number">1</span><span class="ph token punctuation">;</span>       <span class="ph token comment">/* day of week [0,6] (Sunday = 0) */</span>
                                <span class="ph token comment">/* tm_yday - day of year [0,365] */</span>
                                <span class="ph token comment">/* tm_isdst - daylight savings flag */</span>

    <span class="ph token function">RTC_TimeSet</span><span class="ph token punctuation">(</span><span class="ph token operator">&amp;</span>sys_time<span class="ph token punctuation">)</span><span class="ph token punctuation">;</span>


    <span class="ph token comment">/* Set Alarm Time and date. Generate alarm every day when Hour, Minute and Seconds match.
       15-01-2018 12:00:20 Monday */</span>
    alarm_time<span class="ph token punctuation">.</span>tm_hour <span class="ph token operator">=</span> <span class="ph token number">12</span><span class="ph token punctuation">;</span>
    alarm_time<span class="ph token punctuation">.</span>tm_sec <span class="ph token operator">=</span> <span class="ph token number">20</span><span class="ph token punctuation">;</span>
    alarm_time<span class="ph token punctuation">.</span>tm_min <span class="ph token operator">=</span> <span class="ph token number">00</span><span class="ph token punctuation">;</span>
    alarm_time<span class="ph token punctuation">.</span>tm_mon <span class="ph token operator">=</span> <span class="ph token number">0</span><span class="ph token punctuation">;</span>
    alarm_time<span class="ph token punctuation">.</span>tm_year <span class="ph token operator">=</span> <span class="ph token number">118</span><span class="ph token punctuation">;</span>
    alarm_time<span class="ph token punctuation">.</span>tm_mday <span class="ph token operator">=</span> <span class="ph token number">15</span><span class="ph token punctuation">;</span>
    alarm_time<span class="ph token punctuation">.</span>tm_wday <span class="ph token operator">=</span> <span class="ph token number">1</span><span class="ph token punctuation">;</span>

    <span class="ph token function">RTC_RTCCAlarmSet</span><span class="ph token punctuation">(</span><span class="ph token operator">&amp;</span>alarm_time<span class="ph token punctuation">,</span> RTC_ALARM_MASK_HHMMSS<span class="ph token punctuation">)</span><span class="ph token punctuation">;</span>


    <span class="ph token keyword">while</span> <span class="ph token punctuation">(</span> true <span class="ph token punctuation">)</span>
    <span class="ph token punctuation">{</span>
        <span class="ph token keyword">if</span><span class="ph token punctuation">(</span>alarm_triggered <span class="ph token operator">==</span> true<span class="ph token punctuation">)</span>
        <span class="ph token punctuation">{</span>
            <span class="ph token function">printf</span><span class="ph token punctuation">(</span><span class="ph token string">"\n\rAlarm Triggered !!!!!!!!\n\r"</span><span class="ph token punctuation">)</span><span class="ph token punctuation">;</span>
            alarm_triggered <span class="ph token operator">=</span> false<span class="ph token punctuation">;</span>
        <span class="ph token punctuation">}</span>
    <span class="ph token punctuation">}</span>

<span class="ph token punctuation">}</span></code></pre><p class="p"><strong class="ph b">Library Interface</strong></p>
<p class="p">Real-Time Counter peripheral library in Mode 2 provides the following interfaces:</p>
<p class="p"><strong class="ph b">Functions</strong></p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><col style="width:" /><col style="width:" /><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="text-align:left;vertical-align:middle;" id="d751202e1013"><span>Name</span></th>
<th class="entry cellrowborder" style="text-align:left;vertical-align:middle;" id="d751202e1015"><span>Description</span></th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e1013 "><span>RTC_Initialize</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e1015 "><span>Initialize given instance of the RTC peripheral</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e1013 "><span>RTC_FrequencyCorrect</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e1015 "><span>Calibrate for too-slow or too-fast oscillator</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e1013 "><span>RTC_RTCCTimeGet</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e1015 "><span>Gets the current time and date</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e1013 "><span>RTC_RTCCTimeSet</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e1015 "><span>Sets the Real Time Clock Calendar time and date</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e1013 "><span>RTC_RTCCAlarmSet</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e1015 "><span>Set an alarm</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e1013 "><span>RTC_RTCCCallbackRegister</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e1015 "><span>Register the callback function to be called when an RTCC Interrupt occurs</span></td>
</tr>
</tbody>
</table>
</div>
<p class="p"><strong class="ph b">Data types and constants</strong></p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><col style="width:" /><col style="width:" /><col style="width:" /><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="text-align:left;vertical-align:middle;" id="d751202e1058"><span>Name</span></th>
<th class="entry cellrowborder" style="text-align:left;vertical-align:middle;" id="d751202e1060"><span>Type</span></th>
<th class="entry cellrowborder" style="text-align:left;vertical-align:middle;" id="d751202e1062"><span>Description</span></th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e1058 "><span>RTC_ALARM_MASK</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e1060 "><span>Enum</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e1062 "><span>Possible RTC Alarm Mask Settings</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e1058 "><span>RTC_CLOCK_EVENT</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e1060 "><span>Enum</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e1062 "><span>Possible RTC RTCC Mode Events</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e1058 "><span>RTC_CALLBACK</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e1060 "><span>Typedef</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d751202e1062 "><span>Defines the data type and function signature of the Real Time Clock Calendar callback function</span></td>
</tr>
</tbody>
</table>
</div>
</div>
</body>
</html>