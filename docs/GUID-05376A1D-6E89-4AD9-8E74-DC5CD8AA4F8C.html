<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE11" /><meta name="copyright" content="(C) Copyright 2022" />
<meta name="DC.rights.owner" content="(C) Copyright 2022" />
<meta name="DC.type" content="topic" />
<meta name="DC.title" content="Power Manager (PM)" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="power-manager-pm" />
<link rel="stylesheet" type="text/css" href="stylesheets/commonltr.css" />
<link rel="stylesheet" type="text/css" href="stylesheets/atmel.css" />
<link rel="stylesheet" type="text/css" href="./stylesheets/common-extended.css" /><title>Power Manager (PM)</title>
<meta name="Microsoft.Help.Id" content="GUID-1EA9B250-D935-443A-9FA9-C48E50D229E8-power-manager-pm" />
<meta name="Microsoft.Help.TocParent" content="GUID-1EA9B250-D935-443A-9FA9-C48E50D229E8" />
<meta name="Microsoft.Help.TocOrder" content="0" />
<meta name="Microsoft.Help.Locale" content="en-US" />
<meta name="Microsoft.Help.TopicLocale" content="en-US" />
<meta name="Microsoft.Help.DisplayVersion" content="MPLABÂ® Harmony Peripheral Libraries Reference A 09/2021" />
<script language="javascript">
       
       if (window.parent.location.protocol != 'file:') {
				document.addEventListener('click', function(e) {
				    if (e.target) {
               if (e.target.nodeName == "A" ) {
                    if (!e.target.target) {
                      e.preventDefault();
                      e.stopPropagation();
                              
                      var origUrl = window.parent.location.href.substr(0, window.parent.location.href.indexOf("?"));
                      if (origUrl.length === 0) {
                          origUrl = window.parent.location.href;
                      }
                      var href= e.target.getAttribute("href");
                      var parts = href.split("#");
          
                      var url = "";
                      if (parts.length == 2 ) {
                        if (!parts[0].length) {
                            url = window.parent.location.search.replace('?','')
                        } else {
                            url = parts[0].replace('.html','');
                        }
                      } else {
                        url = parts[0].replace('.html','');
                      }

                      if (parts.length == 2) {
                          url += "#" + parts[1];
                      }
    
                      window.parent.location.href = origUrl + "?" + url;

                      return false;
                    }
               }
            }
				});
			}

		</script><script language="javascript">
        function cpy(id, button) {
        
            var element = document.getElementById(id);
            var content = element.getAttribute("content");
            var textArea = document.createElement("textarea");
            
            // Place in the top-left corner of screen regardless of scroll position.
            textArea.style.position = 'fixed';
            textArea.style.top = 0;
            textArea.style.left = 0;
            
            // Ensure it has a small width and height. Setting to 1px / 1em
            // doesn't work as this gives a negative w/h on some browsers.
            textArea.style.width = '2em';
            textArea.style.height = '2em';
            
            // We don't need padding, reducing the size if it does flash render.
            textArea.style.padding = 0;
            
            // Clean up any borders.
            textArea.style.border = 'none';
            textArea.style.outline = 'none';
            textArea.style.boxShadow = 'none';
            
            // Avoid flash of the white box if rendered for any reason.
            textArea.style.background = 'transparent';
            
            
            textArea.value = content;
            
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
               var successful = document.execCommand('copy');
               var msg = successful ? 'successful' : 'unsuccessful';
               if (!button.classList.contains("copied")){
                  button.textContent = "Copied";
                  button.classList.add("copied");
                  setTimeout(function(){
                    button.textContent = "Copy";
                    button.classList.remove("copied");
                  },1000);
               }
            } catch (err) {
              console.log('Oops, unable to copy');
            }
            
            document.body.removeChild(textArea);
        }
      </script><script language="javascript">
          
          // Add the MathML namespace to html
          var html = document.getElementsByTagName("html")[0],
          head = document.getElementsByTagName("head")[0];
          
          var mathJax = document.createElement("script");
          mathJax.src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML";
          head.appendChild(mathJax);
          
          html.setAttribute("xmlns:m","http://www.w3.org/1998/Math/MathML");
          
          function inIframe() { try { return window.self !== window.top; } catch (e) { return true; } }
          
          if (!inIframe()) { 
          
          var Default = "index.html?GUID-05376A1D-6E89-4AD9-8E74-DC5CD8AA4F8C"; 
          
          var displaylocation = "value" + window.location.href;
          
          var GUIDS = displaylocation.split('GUID');          
          
          if (displaylocation.indexOf('#GUID') != -1) {            
          var First = GUIDS[1].split('.html');  
          if (GUIDS[3]){First = GUIDS[2].split('.html');}
          if (GUIDS[4]){First = GUIDS[3].split('.html');}
          if (GUIDS[5]){First = GUIDS[4].split('.html');}
          
          var Second = GUIDS[2].split('#');   
          if (GUIDS[3]){Second = GUIDS[3].split('#');}
          if (GUIDS[4]){Second = GUIDS[4].split('#');}
          if (GUIDS[5]){Second = GUIDS[5].split('#');}
          
          Default = "index.html?" + "GUID" + First[0] + "GUID" + Second[0];     
          }                    
          window.top.location = Default;
          }       
          
        </script><style xml:space="">
        
          button.copy-code{
            display:none;
            padding:0.7em 1.4em;
            margin:0 0.3em 0.3em 0;
            border-radius:0.15em;
            box-sizing: border-box;
            text-decoration:none;
            font-family:'Roboto',sans-serif;
            text-transform:uppercase;
            font-weight:400;
            color:#FFFFFF;
            background-color:#9c9c9c;
            box-shadow:inset 0 -0.6em 0 -0.35em rgba(0,0,0,0.17);
            text-align:center;
            position:relative;
            border: 0;
            float: right;
            border-radius: .5em;
            cursor: pointer;
          }
          button.copy-code:active{
            top:0.1em;
          }
          
          pre:hover button.copy-code{
            display: inline-block !important;
          }
          button.copy-code.copied {
            cursor: default !important;
          }
          
          
          @media all and (max-width:30em){
            button.copy-code{
              display:block;
              margin:0.4em auto;
            }
          }
        
        
      </style></head>
<body id="power-manager-pm">
<h1 class="title topictitle1" id="ariaid-title1">Power Manager (PM)</h1><div class="body"><p class="p">The Power Manager (PM) consists of three modules: the synchronous clock
controller, the sleep controller, and the reset controller. These
modules are responsible for distributing clocks, supervising low power
modes, and administering the MCU's resets.</p>
<p class="p"><strong class="ph b">Sleep Controller</strong></p>
<p class="p">In active mode, all clock domains are active, allowing software
execution and peripheral operation. The Sleep Mode Controller allows
the user to choose between different sleep modes depending on
application requirements, to save power.</p>
<p class="p">There are two main types of sleep modes available::</p>
<ul class="ul"><li class="li"><p class="p">Idle sleep mode: The CPU stops executing code, no peripheral are
disabled. All interrupt sources can wake up the device</p>
</li>
<li class="li"><p class="p">Standby sleep mode: The user can configure peripherals to be
enabled or not using the respective RUNSTDBY bit. This means that power
consumption is highly dependent on what functionality is enabled.</p>
</li>
</ul>
<p class="p">Three are three levels of idle mode:</p>
<ul class="ul"><li class="li"><p class="p">Idle 0: The CPU clock domain is stopped</p>
</li>
<li class="li"><p class="p">Idle 1: The CPU and AHB clock domains are stopped</p>
</li>
<li class="li"><p class="p">Idle 2: The CPU, AHB and APB clock domains are stopped</p>
</li>
</ul>
<p class="p"><strong class="ph b">Reset Controller</strong></p>
<p class="p">The Reset Controller collects the various reset sources and generates
reset for the device and allows the reset source to be identified by
the software.</p>
<ul class="ul"><li class="li"><p class="p"><strong class="ph b">Power On Reset: </strong>The device contains a power-on-reset
(POR) detector, which keeps the system reset until power is stable.
This eliminates the need for external reset circuitry to guarantee
stable operation when powering up the device.</p>
</li>
<li class="li"><p class="p"><strong class="ph b">VDDCORE Brown Out Reset: </strong>BOD12 will reset the device if a
voltage of 1.2 V or below is observed on the I/O pin supplying power to
the MCU core (VDDCORE).</p>
</li>
<li class="li"><p class="p"><strong class="ph b">VDDANA Brown Out Reset:</strong> BOD33 resets the device if the
voltage on the VDDANA pin falls below a value configured by the SYSCTRL</p>
</li>
<li class="li"><p class="p"><strong class="ph b">Watchdog Reset:</strong> The watchdog reset occurs when it times out</p>
</li>
<li class="li"><p class="p"><strong class="ph b">System Reset: </strong>The System Reset Request is a software reset
generated by the CPU when asserting the SYSRESETREQ bit located in the
Reset Control register of the CPU</p>
</li>
<li class="li"><p class="p"><strong class="ph b">External Reset: </strong>A external reset is generated when a low
level is detected on the RESET pin</p>
</li>
</ul>
<p class="p">Resets are divided into two modes based upon the source of the reset.</p>
<ul class="ul"><li class="li"><p class="p">Power Resets include resets generated by POR, BOD12, and BOD33.</p>
</li>
<li class="li"><p class="p">User Resets consist of the external reset, WDT, and the software
reset instruction</p>
</li>
</ul>
<p class="p">Both power and user reset causes the device to restart and set most
registers of the MCU to a preset state. The difference between the two
modes is how they affect the Real Time Clock, the 32 K oscillator, and
the WDT. The underlying reasoning for having two reset modes is to
protect the operation of the WDT and the RTC from non-power related
anomalies.</p>
<p class="p"><strong class="ph b">Synchronous Clock Controller</strong></p>
<p class="p">The main clock is s the common root for the synchronous clocks. This is
fed into the common 8-bit prescaler that is used to generate
synchronous clocks to the CPU, AHB and APBx modules.</p>
<p class="p"><strong class="ph b">Using The Library</strong></p>
<p class="p">The power manager peripheral library provides API to enter Idle Sleep
mode and Standby Sleep mode. It also provides API to find the cause of
last device reset</p>
<p class="p"><strong class="ph b">Library Interface</strong></p>
<p class="p">Power Manager peripheral library provides the following interfaces:</p>
<p class="p"><strong class="ph b">Functions</strong></p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><col style="width:" /><col style="width:" /><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="text-align:left;vertical-align:middle;" id="d530253e110"><span>Name</span></th>
<th class="entry cellrowborder" style="text-align:left;vertical-align:middle;" id="d530253e112"><span>Description</span></th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d530253e110 "><span>PM_ResetCauseGet</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d530253e112 "><span>Reports the cause of the last reset</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d530253e110 "><span>PM_StandbyModeEnter</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d530253e112 "><span>Puts the device in standby mode</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d530253e110 "><span>PM_IdleModeEnter</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d530253e112 "><span>Puts the device in Idle mode</span></td>
</tr>
</tbody>
</table>
</div>
<p class="p"><strong class="ph b">Data types and constants</strong></p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><col style="width:" /><col style="width:" /><col style="width:" /><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="text-align:left;vertical-align:middle;" id="d530253e141"><span>Name</span></th>
<th class="entry cellrowborder" style="text-align:left;vertical-align:middle;" id="d530253e143"><span>Type</span></th>
<th class="entry cellrowborder" style="text-align:left;vertical-align:middle;" id="d530253e145"><span>Description</span></th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d530253e141 "><span>PM_RESET_CAUSE</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d530253e143 "><span>Enum</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d530253e145 "><span>Identifies the type of reset</span></td>
</tr>
</tbody>
</table>
</div>
</div>
</body>
</html>