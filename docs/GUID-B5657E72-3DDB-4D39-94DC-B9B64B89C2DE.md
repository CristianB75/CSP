# Real-time Clock \(RTC\)

The RTC provides a full binary-coded decimal \(BCD\) clock that includes century \(19/20\), year \(with leap years\), month, day, hours, minutes, and seconds. The RTC can operate in 24-hour mode or in 12-hour mode with an AM/PM indicator. The reference clock is the Slow Clock \(SLCK\) which can be driven internally or by an external 32.768 kHz crystal.

The RTC continues to run in the device's low-power sleep modes, to track the current time and date information. The RTC can be used as a source to wake up the system at a scheduled time or periodically using the alarm functions.

**Using The Library**

The RTC keeps track of the current time and generates an alarm at the desired time. The RTC Alarm has five programmable fields: month, day, hours, minutes, and seconds.

Each of these fields can be enabled or disabled individually to match the alarm condition:

-   If all the fields are enabled, an alarm flag is generated \(the corresponding flag is asserted and an interrupt generated if enabled\) at a given month, date, hour, minute, and second

-   If only the "seconds" field is enabled, then an alarm is generated every minute


Depending on the combination of fields enabled, a large number of possibilities are available to the user application ranging from minutes to 365/366 days.

To avoid unwanted side effects, verification is performed on century, year, month, day, hours, minutes and seconds when the user sets up the time and alarm. If any field fails its check, the new data is not loaded into the destination register \(or counter\) and returns a "false" status. When the user programs acceptable time/date fields, the time set and alarm set API returns "true".

This example demonstrates how to set the RTC time, and alarm time to<br />generate an alarm interrupt at the desired time of the day.

```c
void RTC0_Callback( uintptr_t context, uint32_t int_cause )
{
    if (int_cause &amp; RTC_INT_ALARM)
    {
        /* Alarm has Occurred */
    }
}

int main ( void )
{
    /* Initialize System Time and Alarm Time */
    struct tm sys_time;
    struct tm alarm_time;

    /* Register Callback */
    RTC0_CallbackRegister(RTC0_Callback, (uintptr_t) NULL);


    /* Set Time and date
      <b>15&#45;01&#45;2018 12:00:00 Monday</b> */
    sys_time.tm_hour = 12;
    sys_time.tm_sec = 00;
    sys_time.tm_min = 00;
    sys_time.tm_mon = 0;
    sys_time.tm_year = 118;
    sys_time.tm_mday = 15;
    sys_time.tm_wday = 1;

    if (RTC0_TimeSet(&amp;sys_time) == false)
    {
        // Invalid time and/or data input
    }

    /* Set Alarm Time and date. Generate alarm every day when Hour, Minute and Seconds match.
       <b>15&#45;01&#45;2018 12:00:20 Monday</b> */
    alarm_time.tm_hour = 12;
    alarm_time.tm_sec = 20;
    alarm_time.tm_min = 00;
    alarm_time.tm_mon = 0;
    alarm_time.tm_year = 118;
    alarm_time.tm_mday = 15;
    alarm_time.tm_wday = 1;

    if (RTC0_AlarmSet(&amp;alarm_time, RTC_ALARM_MASK_HHMISS) == false)
    {
        // Invalid Alarm Time and/or data input
    }

    /* Get System Time */
    while ( true )
    {
        RTC0_TimeGet(&amp;sys_time);
        printf("System time is:   %02d:%02d:%02d\\r",sys_time.tm_hour, sys_time.tm_min, sys_time.tm_sec);
    }

}
```

**Library Interface**

Real-time Clock peripheral library provides the following interfaces:

**Functions**

|Name|Description|
|----|-----------|
|RTC\_Initialize|Initializes given instance of the RTC peripheral|
|RTC\_TimeSet|Sets the Time for the RTC peripheral|
|RTC\_TimeGet|Reads the current time|
|RTC\_AlarmSet|Sets up the Alarm|
|RTC\_InterruptDisable|Disables the specified RTC interrupt|
|RTC\_InterruptEnable|Enables the specified RTC interrupt|
|RTC\_CallbackRegister|Sets the pointer to the function \(and it's context\) to be called when the Timeout events occur|

**Data types and constants**

|Name|Type|Description|
|----|----|-----------|
|RTC\_ALARM\_MASK|Enum|Defines the data type for the RTC Alarm Mask|
|RTC\_INT\_MASK|Enum|Defines the Interrupt mask for RTC events|
|RTC\_CALLBACK|Typedef|Defines the data type and function signature for the RTC peripheral callback function|

-   **[RTC\_Initialize Function](GUID-8789706F-69A3-4685-8629-AE467DDD8768.md)**  

-   **[RTC\_AlarmSet Function](GUID-D10AAF2D-5E2C-4496-9F10-0C5FFBB95123.md)**  

-   **[RTC\_CallbackRegister Function](GUID-56427CBD-77A4-4397-8C1E-360ECF636825.md)**  

-   **[RTC\_INT\_MASK Enum](GUID-358818EB-93A7-41C7-A324-3B845A17076E.md)**  

-   **[RTC\_InterruptDisable Function](GUID-35135924-1496-4C2B-A718-EA0E3D4313A0.md)**  

-   **[RTC\_InterruptEnable Function](GUID-9DA2DC19-4D6A-4A55-9189-85F03A68C254.md)**  

-   **[RTC\_TimeGet Function](GUID-CBA1ABCB-3889-476F-8584-EAA4417C5B8D.md)**  

-   **[RTC\_TimeSet Function](GUID-B68135EA-D2BD-46DA-9AA8-ADFE709E8327.md)**  

-   **[RTC\_ALARM\_MASK Enum](GUID-F6934239-F544-44A1-A34A-2E28A4476A2D.md)**  

-   **[RTC\_CALLBACK Typedef](GUID-47343662-2D4E-4C04-B763-F29C34A7AB7F.md)**  


**Parent topic:**[SAM 9X60 Peripheral Libraries](GUID-CCAAC7F0-6BA8-4630-91AE-69718D188CBF.md)

**Parent topic:**[SAM 9X7 Peripheral Libraries](GUID-FB6741AA-355E-483F-9727-37728953D583.md)

**Parent topic:**[SAM A5D2 Peripheral Libraries](GUID-F6605EDC-FC71-4081-8560-0C1681C1FA8D.md)

**Parent topic:**[SAM A7G5 Peripheral Libraries](GUID-7EEB1AC5-4BFF-4259-97AD-8CF7367D7973.md)

**Parent topic:**[SAM E70 S70 V70 V71 Peripheral Libraries](GUID-6E45C146-6F6D-452A-A2E2-228C3CC905D7.md)

**Parent topic:**[SAM G51 G53 G54 Peripheral Libraries](GUID-E97B8116-033B-411A-925B-E8E6252A1E15.md)

**Parent topic:**[SAM G55 Peripheral Libraries](GUID-E3F1DCC4-CB31-4302-A60B-D2833C5CAD18.md)

**Parent topic:**[SAM RH707 Peripheral Libraries](GUID-C2AC236D-363B-4378-A381-B281F67C8647.md)

**Parent topic:**[SAM RH71 Peripheral Libraries](GUID-AC9BE324-E486-46EA-8D16-E04E15288053.md)

