# System timer \(SysTick\)

The ARM Cortex CPU includes an optional system timer \(SysTick\) that provides a simple, 24-bit clear-on-write, decrementing, wrap-on-zero counter with a flexible control mechanism.

When enabled, the 24-bit timer counter counts down from the value in VAL. When the counter reaches zero, it reloads the value in LOAD on the next clock edge. It then decrements on subsequent clocks. This reloading when the counter reaches zero is called wrapping.

The timer interrupt is activated on the transition from 1 to 0, therefore it activates every n+1 clock ticks. If a period of 100 is required 99 should be written to the SysTick Reload Value register.

The SysTick can be polled by software or can be configured to generate an interrupt.

**Using The Library**

When the timer is enabled, it decrements by one on every rising edge of the input clock, and generates an interrupt when the timer value transitions to zero \(Timer expiry\). This is used to generate periodic interrupt generation.

The SysTick can be polled by software or can be configured to generate an interrupt.

-   With polling, the application will need to continuously poll to check if the timer has expired.

-   With interrupt, the registered callback function will be called when the timer expires. This means the application do not have to poll continuously.


**Callback method**

This example demonstrates how to use SysTick to generate periodic callback.

```c
/* This function is called after Timer expires */
void SYSTICK_EventHandler(uintptr_t context)
{
    /* Toggle LED */
    LED_Toggle();
}

int main(void)
{
    /* Initialize all modules */
    SYS_Initialize ( NULL );

    /* Register Callback */
    SYSTICK_TimerCallbackSet(SYSTICK_EventHandler, (uintptr_t) NULL);

    /* Start the Timer */
    SYSTICK_TimerStart();
}
```

**Library Interface**

System timer peripheral library provides the following interfaces:

**Functions**

|Name|Description|
|----|-----------|
|SYSTICK\_TimerInitialize|Initializes SysTick|
|SYSTICK\_TimerRestart|Restarts SysTick|
|SYSTICK\_TimerStart|Starts System Timer|
|SYSTICK\_TimerStop|Stops System Timer|
|SYSTICK\_TimerPeriodSet|Set the SysTick Load Value|
|SYSTICK\_TimerPeriodGet|Get the SysTick Load Value|
|SYSTICK\_TimerCounterGet|Get the SysTick current Value|
|SYSTICK\_TimerFrequencyGet|Get the SysTick frequency Value|
|SYSTICK\_TimerPeriodHasExpired|Returns the current status of the systick|
|SYSTICK\_DelayMs|Blocking function to generate delay in milliseconds|
|SYSTICK\_DelayUs|Blocking function to generate delay in micro seconds|
|SYSTICK\_TimerCallbackSet|Sets the pointer to the function \(and it's context\) to be called when the given systick reaches 0|

**Data types and constants**

|Name|Type|Description|
|----|----|-----------|
|SYSTICK\_CALLBACK|Typedef|Defines the data type and function signature for the SysTick callback function|

-   **[SYSTICK\_TimerInitialize Function](GUID-25F0A1B6-5FEC-4DA5-BF93-2F019B9641EB.md)**  

-   **[SYSTICK\_TimerRestart Function](GUID-351478C4-7EF9-40F6-A141-BEC1E99DCD26.md)**  

-   **[SYSTICK\_TimerStart Function](GUID-55D53478-5B0C-4F7D-B083-569969364950.md)**  

-   **[SYSTICK\_TimerStop Function](GUID-AB7661E3-0C32-45EA-B471-3F74402E6946.md)**  

-   **[SYSTICK\_TimerPeriodSet Function](GUID-0AB65BFF-CC7D-4A28-813B-99667CEE07EB.md)**  

-   **[SYSTICK\_TimerPeriodGet Function](GUID-57C0E933-AAE0-4D0F-B688-D15A943855F1.md)**  

-   **[SYSTICK\_TimerCounterGet Function](GUID-C4666E0A-92F9-45E5-BA48-91AA4E40946E.md)**  

-   **[SYSTICK\_TimerFrequencyGet Function](GUID-C61DE4C1-F835-490A-AB26-E7A9CC7E1677.md)**  

-   **[SYSTICK\_TimerPeriodHasExpired Function](GUID-7FA402C4-988E-4BF3-928C-C9FAADDC9C07.md)**  

-   **[SYSTICK\_DelayMs Function](GUID-77006DC0-F3D9-4D3D-9657-728998BC6D28.md)**  

-   **[SYSTICK\_DelayUs Function](GUID-8E309FB2-411F-44E9-B8B5-A39B83F82DF3.md)**  

-   **[SYSTICK\_TimerCallbackSet Function](GUID-27A38A48-3F0D-4C70-A6A7-A542907874BE.md)**  

-   **[SYSTICK\_CALLBACK Typedef](GUID-5C1E7346-900D-46C2-ADF6-635B35014188.md)**  


**Parent topic:**[PIC32CM JH00 JH01 Peripheral Libraries](GUID-05924E45-D6B3-4F33-A5EA-9B080FC421D8.md)

**Parent topic:**[PIC32CM LE00 LS00 LS60 Peripheral Libraries](GUID-F80F1B47-C3E4-4803-ACB6-D30AC5EB7B45.md)

**Parent topic:**[PIC32CM MC00 Peripheral Libraries](GUID-ADF45DC0-B32C-4D1F-9332-59EC0DF5097E.md)

**Parent topic:**[PIC32CX BZ2 WBZ45 Peripheral Libraries](GUID-3D519D00-FDEE-4A3E-9EF7-20F335E64CEE.md)

**Parent topic:**[PIC32CX BZ3 WBZ3 Peripheral Libraries](GUID-5752DD6D-6E5D-484D-B564-DA87788492F3.md)

**Parent topic:**[PIC32CX MT Peripheral Libraries](GUID-EEA7836F-956F-4526-BF85-CD488C4CE708.md)

**Parent topic:**[PIC32CZ-CA Peripheral Libraries](GUID-7EAC3718-3D58-4007-AB2A-A0E3C167A2DF.md)

**Parent topic:**[SAM C20 C21 Peripheral Libraries](GUID-49072E61-B7F2-4B32-952E-D6F5FB361AFB.md)

**Parent topic:**[SAM D09 D10 D11 Peripheral Libraries](GUID-F4788319-C5F3-4EB3-8CC7-05770A2EBD32.md)

**Parent topic:**[SAM D20 D21 Peripheral Libraries](GUID-86A69A90-EDAB-465F-A03A-57CD8BF54AE8.md)

**Parent topic:**[SAM D51 E51 E53 E54 Peripheral Libraries](GUID-E33B93DD-6680-477E-AA96-966208DC9A50.md)

**Parent topic:**[SAM DA1 Peripheral Libraries](GUID-0CDE5F35-9BE3-4484-8299-98161C496C00.md)

**Parent topic:**[SAM E70 S70 V70 V71 Peripheral Libraries](GUID-6E45C146-6F6D-452A-A2E2-228C3CC905D7.md)

**Parent topic:**[SAM G51 G53 G54 Peripheral Libraries](GUID-E97B8116-033B-411A-925B-E8E6252A1E15.md)

**Parent topic:**[SAM G55 Peripheral Libraries](GUID-E3F1DCC4-CB31-4302-A60B-D2833C5CAD18.md)

**Parent topic:**[SAM HA1 Peripheral Libraries](GUID-7E583BB3-CBFA-4862-8ED5-40D747167457.md)

**Parent topic:**[SAM L1X Peripheral Libraries](GUID-D259BBBC-6BC2-4F69-849B-C06DF4DDD5F8.md)

**Parent topic:**[SAM L21 Peripheral Libraries](GUID-230EF724-3CDA-4F88-8E42-0EF4C1CA112D.md)

**Parent topic:**[SAM L22 Peripheral Libraries](GUID-C3997EBF-87A0-4DD9-BCB0-C8A58B62E44B.md)

**Parent topic:**[SAM RH707 Peripheral Libraries](GUID-C2AC236D-363B-4378-A381-B281F67C8647.md)

**Parent topic:**[SAM RH71 Peripheral Libraries](GUID-AC9BE324-E486-46EA-8D16-E04E15288053.md)

