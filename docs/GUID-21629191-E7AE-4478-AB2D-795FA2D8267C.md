# SERCOMx\_I2C\_TransferSetup Function

**Parent topic:**[Serial Communication Interface \(SERCOM\)](GUID-76AE7205-E3EF-4EE6-AC28-5153E3565982.md)

## C

```c
/* x = SERCOM instance number */

/* I2C master mode */

bool SERCOMx_I2C_TransferSetup(SERCOM_I2C_TRANSFER_SETUP* setup, uint32_t srcClkFreq)	
```

## Summary

Dynamic setup of SERCOM I2C Peripheral

## Description

This API is generally used when there are multiple clients on the same I2C bus having different I2C clock speed. In such a case, the SERCOMx\_I2C\_TransferSetup API must be called to set the appropriate I2C bus speed before starting the I2C transfer for the I2C slave.

## Precondition

SERCOMx\_I2C\_Initialize must have been called for the associated SERCOM I2C instance. The transfer status should not be busy.

## Parameters

|Param|Description|
|-----|-----------|
|setup|Pointer to the structure containing the transfer setup|
|srcClkFreq|SERCOM I2C Peripheral Clock Source Frequency|

## Returns

*true* - Transfer setup was updated Successfully.

*false* - Failure while updating transfer setup.

## Example

```c
SERCOM_I2C_TRANSFER_SETUP setup;

setup.clkSpeed = 400000;

// Make sure that the I2C is not busy before changing the I2C clock frequency
if (SERCOM0_I2C_I2C_IsBusy() == false)
{
    if (SERCOM0_I2C_TransferSetup( &setup, 0 ) == true)
    {
        // Transfer Setup updated successfully
    }
}
```

## Remarks

srcClkFreq overrides any change in the peripheral clock frequency. If configured to zero PLIB takes the peripheral clock frequency from MHC.

