# TrustRAM \(TRAM\)

The TrustRAM \(TRAM\) is the controller interface for a 256-byte security RAM. This RAM is intended for volatile secret data.

The TRAM is capable of performing address map scrambling as well as data scrambling for both write and read access to the security RAM.The TRAM can perform silent access of the data stream to improve side-channel attacks resistance.

The TRAM can execute two automated tasks that are triggered by external events

-   Remanence prevention and erase.

    -   When a remanence periodic event occurs, the physical data stored in the RAM is inverted in order to prevent physical “burn-in” signatures.

-   Tamper Event

    -   When a tamper event occurs, the TRAM executes a full erase of the control signals as well as the data in the security RAM.


Both automated tasks do not require CPU interaction and can be performed in all sleep modes.

**Using The Library**

TRAM Peripheral library allows user to configure the following options of the TRAM peripheral which are part of the initialization routine in MHC

-   Enable silent access

-   Enable data remanence prevention

-   Enable data erasure on tamper detection


The example code below demonstrates how to Write and read Data from TRAM.

```c
int main( void )
{
    uint32_t rData = 0;
    uint32_t wData = 0;

    /* Initialize all modules */
    SYS_Initialize ( NULL );

    for(uint8_t i = 0; i < 10; i++)
    {
        wData = ~(1 << i);

        TRAM_RAMSet(i, wData);

        TRAM_RAMGet(i, &rData);

        if(rData != wData)
        {
            printf("\n\rTRAM register RAM[%d] value mismatch", i);
            break;
        }
    }
}
```

**Library Interface**

TrustRAM peripheral library provides the following interfaces:

**Functions**

|Name|Description|
|----|-----------|
|TRAM\_Initialize|Initializes the TrustRam|
|TRAM\_DataScrambleEnable|Enable or Disable data scrambling of the TrustRAM|
|TRAM\_DataScrambleKeySet|Sets the key for data scrambling of the TrustRAM|
|TRAM\_RAMGet|Reads data from the TrustRAM RAMx register|
|TRAM\_RAMSet|Write data into the TrustRAM RAMx register|

-   **[TRAM\_Initialize Function](GUID-6950C0D7-1150-46E0-8A87-9880C157A872.md)**  

-   **[TRAM\_DataScrambleEnable Function](GUID-F32F0CEB-6F8F-4691-8020-98B8ECABD272.md)**  

-   **[TRAM\_DataScrambleKeySet Function](GUID-07C54F77-7D93-4496-A87D-005B9E9FD1CC.md)**  

-   **[TRAM\_RAMGet Function](GUID-04834048-8AC8-4976-B39D-433848DC5581.md)**  

-   **[TRAM\_RAMSet Function](GUID-1657A95E-D8AD-49C7-942C-BD1FE9FE854A.md)**  


**Parent topic:**[PIC32CM LE00 LS00 LS60 Peripheral Libraries](GUID-F80F1B47-C3E4-4803-ACB6-D30AC5EB7B45.md)

**Parent topic:**[PIC32CZ-CA Peripheral Libraries](GUID-7EAC3718-3D58-4007-AB2A-A0E3C167A2DF.md)

**Parent topic:**[SAM L1X Peripheral Libraries](GUID-D259BBBC-6BC2-4F69-849B-C06DF4DDD5F8.md)

