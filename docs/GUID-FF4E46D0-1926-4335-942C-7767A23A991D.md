# Direct Memory Access Controller \(DMAC\)

The Direct Memory Access \(DMA\) Controller is a bus master module useful<br />for data transfers between different devices without CPU intervention.<br />The source and destination of a DMA transfer can be any of the memory<br />mapped modules existent in the device such as SPI, UART, PMP, etc., or<br />memory itself.

The DMA Controller can also be used to generate CRC on the data been<br />transferred through the channel

**Using The Library**

User can use either callback mechanism or polling mechanism to<br />determine DMA transfer completion.

-   With polling, the application will need to continuously poll to<br />check if the DMA has completed the transfer.

-   With callback, the registered callback function will be called when<br />the transfer is completed. This means the application do not have to<br />poll continuously.


**Callback method**

This example demonstrates DMA transfer with callback

```c
#define USART1_TRANSMIT_ADDRESS     (U1TXREG)

uint8_t txBuffer[] = "Hello World!";

void DMAC_Callback(DMAC_TRANSFER_EVENT status, uintptr_t context)
{
      if(status == DMAC_TRANSFER_EVENT_COMPLETE)
      {
           // Transfer is completed.
      }
}

 int main ( void )
{
      SYS_Initialize ( NULL );

      DMAC_ChannelCallbackRegister(DMAC_CHANNEL_1, DMAC_Callback, 0);

      DMAC_ChannelTransfer(DMAC_CHANNEL_1, txBuffer, sizeof(txBuffer), (const void *)USART1_TRANSMIT_ADDRESS, 1, 1);

}
```

**Polling method**

This example demonstrates DMA transfer with polling

```c
#define USART1_TRANSMIT_ADDRESS     (&U1TXREG)

uint8_t txBuffer[] = "Hello World!";

int main ( void )
{
      SYS_Initialize ( NULL );

      DMAC_ChannelTransfer(DMAC_CHANNEL_1, txBuffer, sizeof(txBuffer), (const void *)USART1_TRANSMIT_ADDRESS, 1, 1);

      while(DMAC_ChannelIsBusy(DMAC_CHANNEL_1));
}

```

**Library Interface**

peripheral library provides the following interfaces:

**Functions**

|Name|Description|
|----|-----------|
|DMAC\_Initialize|This function initializes the DMAC controller of the device|
|DMAC\_ChannelCallbackRegister|This function allows a DMAC PLIB client to set an event handler|
|DMAC\_ChannelTransfer|Schedules a DMA transfer on the specified DMA channel|
|DMAC\_ChainTransferSetup|Setup a DMA channel for chain transfer|
|DMAC\_ChannelPatternMatchSetup|Sets up DMA channel for pattern matching|
|DMAC\_ChannelPatternMatchDisable|Disables the DMA pattern matching|
|DMAC\_ChannelDisable|This function disables the DMA channel|
|DMAC\_ChannelIsBusy|Reads the busy status of a channel|
|DMAC\_ChannelTransferStatusGet|Returns the DMA channel's transfer status|
|DMAC\_ChannelCRCSetup|DMA Channel CRC setup and enable function|
|DMAC\_CRCDisable|DMA CRC disable function|
|DMAC\_CRCRead|DMA CRC read function|

**Data types and constants**

|Name|Type|Description|
|----|----|-----------|
|DMAC\_ERROR|Enum|Identifies the available DMA operating modes|
|DMAC\_TRANSFER\_EVENT|Enum|Identifies the status of the transfer event|
|DMAC\_DATA\_PATTERN\_SIZE|Enum|Identifies the pattern size for data matching|
|DMAC\_CHANNEL\_CALLBACK|Typedef|Pointer to a DMAC Transfer Event handler function|
|DMAC\_CHANNEL|Enum|Fundamental data object that represents DMA channel number|
|DMAC\_CRC\_SETUP|Struct|Fundamental data object that represents DMA CRC setup parameters|

-   **[DMAC\_Initialize Function](GUID-261C3DF5-FFB1-4D76-ADE9-988D89181C61.md)**  

-   **[DMAC\_ChannelCallbackRegister Function](GUID-B8FE6AE4-1D21-477A-8FD9-9BBA33A206DD.md)**  

-   **[DMAC\_ChannelTransfer Function](GUID-71621AC1-CB46-452A-8965-216A515ED112.md)**  

-   **[DMAC\_ChainTransferSetup Function](GUID-AE51A717-BFB3-4A95-BDD6-00DF31CBB937.md)**  

-   **[DMAC\_ChannelPatternMatchSetup Function](GUID-53115E4D-A429-4569-906B-450D7F54B88F.md)**  

-   **[DMAC\_ChannelPatternMatchDisable Function](GUID-A4422449-56EC-41BF-9EDD-B72193F4D760.md)**  

-   **[DMAC\_ChannelDisable Function](GUID-3C8B2338-A727-46C9-8744-D728FB0445DE.md)**  

-   **[DMAC\_ChannelIsBusy Function](GUID-B4F0F7E0-C06D-4D7F-B02C-F47668838D69.md)**  

-   **[DMAC\_ChannelTransferStatusGet Function](GUID-93C9D41B-6D98-4BC3-BC86-6AE322522217.md)**  

-   **[DMAC\_ChannelCRCSetup Function](GUID-FAD480EF-D06B-473F-B0FF-2C27848F7375.md)**  

-   **[DMAC\_CRCDisable Function](GUID-B93122B1-ACB0-4FB7-8ECB-F2F40BBB4944.md)**  

-   **[DMAC\_CRCRead Function](GUID-58F71908-4E17-4EBB-9563-E6DB645AF40F.md)**  

-   **[DMAC\_ERROR Enum](GUID-F91C579F-0B1E-4113-9CF4-94425DB78033.md)**  

-   **[DMAC\_TRANSFER\_EVENT Enum](GUID-1A98AC4A-1DA4-47B7-B03B-1ADFFCC4A100.md)**  

-   **[DMAC\_DATA\_PATTERN\_SIZE Enum](GUID-4100DFAA-8561-4F92-ACE1-A7DACCF55D87.md)**  

-   **[DMAC\_CHANNEL\_CALLBACK Typedef](GUID-061BC54B-9778-4314-9CED-D43DBD08E2DC.md)**  

-   **[DMAC\_CHANNEL Enum](GUID-2B331DE2-07FE-4B0E-AB37-AA73198F6CA2.md)**  

-   **[DMAC\_CRC\_SETUP Struct](GUID-C618105D-F468-4BA6-B959-95EC12FE73FE.md)**  


**Parent topic:**[PIC32MK GPD GPE MCF Peripheral Libraries](GUID-A63F4C14-72E7-44D7-9C70-A48BBD41B583.md)

**Parent topic:**[PIC32MK GPG MCJ Peripheral Libraries](GUID-A0350A48-03F7-4370-A6C5-612386A4ABAC.md)

**Parent topic:**[PIC32MK GPK MCM Peripheral Libraries](GUID-801B9DE7-4616-4E38-BF86-C82B78A4F430.md)

**Parent topic:**[PIC32MK MCA Peripheral Libraries](GUID-E11C5899-DD12-4B78-8076-8A415C20F144.md)

**Parent topic:**[PIC32MZ DA Peripheral Libraries](GUID-02A4B196-FE06-48DB-BC12-D3A68B6D983E.md)

**Parent topic:**[PIC32MZ EF Peripheral Libraries](GUID-F47955F5-89DE-43B0-8C2C-DE0070EBA152.md)

**Parent topic:**[PIC32MZ W1 Peripheral Libraries](GUID-EBD28D67-7F6E-46D1-9ABE-2BDE1973D143.md)

