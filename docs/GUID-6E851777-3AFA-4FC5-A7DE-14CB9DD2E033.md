# Analog Digital Converter \(ADC\)

-   8-bit, 10-bit or 12-bit resolution

-   Up to 1,000,000 samples per second \(1MSPS\)

-   Differential and single-ended inputs

-   Five Internal inputs

-   Single, continuous, and sequencing options

-   Windowing monitor with selectable channel

-   Conversion range: Vref = 

-   Built-in internal reference and external reference options

-   Event-triggered conversion for accurate timing \(one event input\)

-   Optional DMA transfer of conversion settings or result

-   Hardware gain and offset compensation

-   Averaging and oversampling with decimation to support up to 16-bit result

-   Selectable sampling time

-   Flexible Power or Throughput rate management


**Using The Library**

**ADC Sample:**

```c
#include <stddef.h>                     // Defines NULL
#include <stdbool.h>                    // Defines true
#include <stdlib.h>                     // Defines EXIT_FAILURE
#include <stdio.h>
#include "definitions.h"                // SYS function prototypes

#define ADC_VREF                (3.3f)
#define DAC_COUNT_INCREMENT     (170U)  // Equivalent to 0.1V with the given DAC reference 
#define DAC_COUNT_MAX           (4095U)

uint16_t adc_count;
float input_voltage;
/* Initial value of dac count which is midpoint = 1.2 V*/
uint16_t dac_count = 2048;   

void switch_handler(uintptr_t context )
{
    /* Write next data sample */
    dac_count = dac_count + DAC_COUNT_INCREMENT;
    
    if (dac_count > DAC_COUNT_MAX)
            dac_count = 2048;    
    
    DAC_DataWrite(DAC_CHANNEL_0, dac_count);
}

// *****************************************************************************
// *****************************************************************************
// Section: Main Entry Point
// *****************************************************************************
// *****************************************************************************

int main ( void )
{
    /* Initialize all modules */
    SYS_Initialize ( NULL );
    
    printf("\n\r---------------------------------------------------------");
    printf("\n\r                    ADC Sample Demo                 ");
    printf("\n\r---------------------------------------------------------\n\r");
    
    ADC0_Enable();
    SYSTICK_TimerStart();
    EIC_CallbackRegister(EIC_PIN_15, switch_handler, (uintptr_t) NULL);
    DAC_DataWrite(DAC_CHANNEL_0, dac_count);
    while (1)
    {
        /* Start ADC conversion */
        ADC0_ConversionStart();

        /* Wait till ADC conversion result is available */
        while(!ADC0_ConversionStatusGet())
        {

        };

        /* Read the ADC result */
        adc_count = ADC0_ConversionResultGet();
        input_voltage = (float)adc_count * ADC_VREF / 4095U;

        printf("ADC Count = 0x%03x, ADC Input Voltage = %d.%02d V \r", adc_count, (int)input_voltage, (int)((input_voltage - (int)input_voltage)*100.0));
        
        SYSTICK_DelayMs(500);
    }

    /* Execution should not come here during normal operation */

    return ( EXIT_FAILURE );
}
```

**Library Interface**

Analog Digital Converter peripheral library provides the following interfaces:

**Functions**

|Name|Description|
|----|-----------|
|ADCx\_Initialize|Initializes given instance of ADC peripheral|
|ADCx\_Enable|Enables given instance of ADC peripheral|
|ADCx\_Disable|Disables given instance of ADC peripheral|
|ADCx\_ChannelSelect|Selects ADC input channel|
|ADCx\_ConversionStart|Starts the ADC conversion with the software trigger|
|ADCx\_ConversionStatusGet|Returns the status of the conversion of the channel|
|ADCx\_ConversionResultGet|Returns the conversion result of the channel|
|ADCx\_LastConversionResultGet|Returns the result for the previous adc conversion of the channel|
|ADCx\_WindowMonitorStatusGet|Returns the status of the window monitor flag|
|ADCx\_ComparisonWindowSet|This function sets the window upper threshold and lower threshold values|
|ADCx\_WindowModeSet|This function configures the window comparison mode|
|ADCx\_CallbackRegister|Registers the function to be called from interrupt|
|ADCx\_InterruptsClear|This function clears the interrupt flags|
|ADCx\_InterruptsEnable|This function enables the interrupts|
|ADCx\_InterruptsDisable|This function disables the interrupts|

**Data types and constants**

|Name|Type|Description|
|----|----|-----------|
|ADC\_STATUS|Enum|Identifies ADC interrupt flag status|
|ADC\_POSINPUT|Enum|Identifies ADC positive input pin to select|
|ADC\_NEGINPUT|Enum|Identifies ADC negative input pin to select|
|ADC\_WINMODE|Enum|Identifies ADC window comparison modes|
|ADC\_CALLBACK|Typedef|Defines the data type and function signature for the ADC peripheral callback function|

-   **[ADCx\_Initialize Function](GUID-396C47E4-A7E5-4E83-B9B2-C1C2D6B38DA0.md)**  

-   **[ADCx\_Enable Function](GUID-3A6F7362-5060-4448-A253-5E155F1FB260.md)**  

-   **[ADCx\_Disable Function](GUID-B8220677-A69F-4451-A8CD-70CF1BEE850A.md)**  

-   **[ADCx\_ChannelSelect Function](GUID-12F0436D-EE84-4725-ADBC-EE75B8D1E619.md)**  

-   **[ADCx\_ConversionStart Function](GUID-6307B3DB-26C1-412F-A8A1-E25191B387AE.md)**  

-   **[ADCx\_ConversionStatusGet Function](GUID-AE417AA9-160E-4699-98E3-812A908BB9B3.md)**  

-   **[ADCx\_ConversionResultGet Function](GUID-F3D36D4D-91DA-4978-9EE3-53C6C3740F7C.md)**  

-   **[ADCx\_LastConversionResultGet Function](GUID-A89613FF-EEE2-4434-90E3-D10FC802FEFA.md)**  

-   **[ADCx\_WindowMonitorStatusGet Function](GUID-ECCE74A7-DF45-445D-8A8D-777B5FF67878.md)**  

-   **[ADCx\_ComparisonWindowSet Function](GUID-98A43D93-0158-4DEA-900F-9F0668981AF0.md)**  

-   **[ADCx\_WindowModeSet Function](GUID-23D20A5C-5EFD-449C-9B26-2520D9684119.md)**  

-   **[ADCx\_CallbackRegister Function](GUID-7E626C3E-2FEB-4000-85F0-795BC62A9F46.md)**  

-   **[ADCx\_InterruptsClear Function](GUID-9076E2F7-0E66-490A-B6EB-47F36A0D2195.md)**  

-   **[ADCx\_InterruptsEnable Function](GUID-24D9C56B-38E3-4079-80D6-58C87798999A.md)**  

-   **[ADCx\_InterruptsDisable Function](GUID-5B346AF3-B335-462A-92AE-B7F57A254855.md)**  

-   **[ADC\_STATUS Enum](GUID-04AFDA57-90CB-41DE-A29F-A0CEA0798CAA.md)**  

-   **[ADC\_POSINPUT Enum](GUID-946C02EB-F235-4032-B35C-D6A1B39CA0E7.md)**  

-   **[ADC\_NEGINPUT Enum](GUID-6056A7C5-9481-4AE6-8A9D-030CB9BCE578.md)**  

-   **[ADC\_WINMODE Enum](GUID-6FA4CC3E-EE76-42C5-9735-E5CA9DFDA95B.md)**  

-   **[ADC\_CALLBACK Typedef](GUID-8D89973F-1373-4767-AD21-FCFCF48B5B1F.md)**  


**Parent topic:**[SAM D51 E51 E53 E54 Peripheral Libraries](GUID-E33B93DD-6680-477E-AA96-966208DC9A50.md)

