# Peripheral Access Controller \(PAC\)

The Peripheral Access Controller \(PAC\) provides interface to protect write access to a peripheral's registers to minimize risk of unintended configuration changes as a result of run-away code.

The peripheral registers that can be protected is denoted by the "PAC Write-Protection" property in each individual register description.

**Using The Library**

The Peripheral Access Controller \(PAC\) provides interface to protect write access to a peripheral's registers to minimize risk of unintended configuration changes as a result of run-away code. The Following operations are provided to manage the peripheral access.

-   **Clear Protection:**

    -   This operation will remove the write access protection for the selected peripheral to enable write access

-   **Set Protection:**

    -   This operation will set the write access protection for the selected peripheral to disable write access.


In an application where write protection is also modified in main and interrupt context, the interrupts must be disabled so that the interrupt can not happen while the main application manipulate the write protection status.

The CPU Exception will be generated when Peripheral Access Error occurs due to the following:

-   If a peripheral is write protected and if a write access is attempted, data will not be written and peripheral returns an access error.

-   Attempting to set protection for the peripheral that is already set or attempting to clear protection for the peripheral that is already cleared. This is a safety feature to ensure correct program execution sequence to clear and set the protection.


The example code below demonstrates how to Clear/Set protection for DSU peripheral using PAC.

```c
bool status = false;

status = PAC_PeripheralIsProtected(PAC_PERIPHERAL_DSU);

if (status == true)
{
    PAC_PeripheralProtectSetup(PAC_PERIPHERAL_DSU, PAC_PROTECTION_CLEAR);
}
else
{
    PAC_PeripheralProtectSetup(PAC_PERIPHERAL_DSU, PAC_PROTECTION_SET);
}
```

**Library Interface**

Peripheral Access Controller peripheral library provides the following interfaces:

**Functions**

|Name|Description|
|----|-----------|
|PAC\_PeripheralIsProtected|Returns PAC protection status of peripheral|
|PAC\_PeripheralProtectSetup|This function configures PAC protection for the specified peripheral|

**Data types and constants**

|Name|Type|Description|
|----|----|-----------|
|PAC\_PERIPHERAL|Enum|List of available Peripheral module on which errors will be detected|
|PAC\_PROTECTION|Enum|List of available Peripheral Access Control Operations|

-   **[PAC\_PeripheralIsProtected Function](GUID-8F942DC4-C82E-426F-B221-10D20CC06E5D.md)**  

-   **[PAC\_PeripheralProtectSetup Function](GUID-E8708A60-048B-4122-AEA9-9F8153E1B3EF.md)**  

-   **[PAC\_PERIPHERAL Enum](GUID-4A640B9C-76F9-45D2-BD88-4639708BA1FD.md)**  

-   **[PAC\_PROTECTION Enum](GUID-0AAD51DE-6F3E-4C59-A036-5527CBDAF7B7.md)**  


**Parent topic:**[SAM D09 D10 D11 Peripheral Libraries](GUID-F4788319-C5F3-4EB3-8CC7-05770A2EBD32.md)

**Parent topic:**[SAM D20 D21 Peripheral Libraries](GUID-86A69A90-EDAB-465F-A03A-57CD8BF54AE8.md)

**Parent topic:**[SAM DA1 Peripheral Libraries](GUID-0CDE5F35-9BE3-4484-8299-98161C496C00.md)

**Parent topic:**[SAM HA1 Peripheral Libraries](GUID-7E583BB3-CBFA-4862-8ED5-40D747167457.md)

