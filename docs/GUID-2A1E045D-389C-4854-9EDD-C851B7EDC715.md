# OTP Memory Controller \(OTPC\)

OTP memory area is mapped into 32-bit words. Each 32-bit word is part of one packet.Each packet contains a 32-bit header and 32-bit words of payload\(data\). The number of payload words is defined in the header.

This mapping system allows three important functions for an OTP memory:

-   Gives a flexible size for any type of data

-   Improves the security by identifying and masking key areas to the System bus

-   Provides an easy way to invalidate a packet and create a replacement packet \(key, data\) while free space is available in OTP


**Using The Library**

OTPC plib supports the following activities on the user area of the OTP:

1.  Create a new packet in the otp area with a given payload

2.  Update the payload of an existing user packet

3.  Read the payload associated with a packet

4.  Lock the packet to prevent any further modification

5.  Invalidate a packet to make sure that it is no longer used

6.  Hide a packet to prevent reading its payload


**Library Interface**

OTP Memory Controller peripheral library provides the following interfaces:

**Functions**

|Name|Description|
|----|-----------|
|OTPC\_Initialize|Initializes given OTPC instancee|
|OTPC\_WritePacket|Perform an OTPC packet write|
|OTPC\_UpdatePayload|Updates the payload of a packet|
|OTPC\_ReadPacket|Reads a User packet from OTPC from a given address|
|OTPC\_LockPacket|Locks the packet|
|OTPC\_InvalidatePacket|Invalidates the packet|
|OTPC\_HidePacket|Hides the packet|

**Data types and constants**

|Name|Type|Description|
|----|----|-----------|
|OTPC\_PACKET\_TYPE|Enum|Identifies user area packet types|
|otpc\_error\_code\_t|Enum|Identifies OTPC error codes|
|OTPC\_NEW\_PACKET|Struct|Structure identifying a new OTPC packet|

-   **[OTPC\_Initialize Function](GUID-B153958D-769E-4814-A832-C6A927811EE4.md)**  

-   **[OTPC\_WritePacket Function](GUID-33748444-049C-4E65-8AF7-04E36ABFBDB7.md)**  

-   **[OTPC\_UpdatePayload Function](GUID-424A4CB9-1021-40D8-ACAF-4373BAF2A1D6.md)**  

-   **[OTPC\_ReadPacket Function](GUID-056E30A6-4180-43D3-95C6-852EDA6BB194.md)**  

-   **[OTPC\_LockPacket Function](GUID-B09345F5-9EA9-4DB9-B0C8-ED969B058A9F.md)**  

-   **[OTPC\_InvalidatePacket Function](GUID-3F15B3F7-7B4D-4C0D-9352-2044EE4AD006.md)**  

-   **[OTPC\_HidePacket Function](GUID-7E57D0D4-DAC8-4790-8546-7988342A5BFE.md)**  

-   **[OTPC\_PACKET\_TYPE Enum](GUID-F095D6E3-9ADD-47BD-8C42-B7007F0FF312.md)**  

-   **[otpc\_error\_code\_t Enum](GUID-667815DC-4C58-4426-A7FC-8D7354F884F3.md)**  

-   **[OTPC\_NEW\_PACKET Struct](GUID-ABAA92BC-5D08-49E7-803F-8320F5282D66.md)**  


**Parent topic:**[SAM 9X60 Peripheral Libraries](GUID-CCAAC7F0-6BA8-4630-91AE-69718D188CBF.md)

**Parent topic:**[SAM 9X7 Peripheral Libraries](GUID-FB6741AA-355E-483F-9727-37728953D583.md)

**Parent topic:**[SAM A7G5 Peripheral Libraries](GUID-7EEB1AC5-4BFF-4259-97AD-8CF7367D7973.md)

