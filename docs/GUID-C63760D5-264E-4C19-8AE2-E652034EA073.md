# SERCOMx\_I2C\_WriteRead Function

**Parent topic:**[Serial Communication Interface \(SERCOM\)](GUID-76AE7205-E3EF-4EE6-AC28-5153E3565982.md)

## C

```c
/* x = SERCOM instance number */

/* I2C master mode */

bool SERCOMx_I2C_WriteRead(uint16_t address, uint8_t *wdata, uint32_t wlength, uint8_t *rdata, uint32_t rlength)	
```

## Summary

Write and Read data from I2C slave

## Description

This function writes data from wdata buffer to the slave of given address and of size \(in bytes\) equal to wlength. Master then generates a repeated start and does a read operation. Read operation reads data into rdata buffer of size \(in bytes\) equal to rlength from the slave. Master generates a stop condition after reading the data.

## Precondition

SERCOMx\_I2C\_Initialize must have been called for the associated SERCOM I2C instance.

## Parameters

|Param|Description|
|-----|-----------|
|address|7-bit / 10-bit slave address|
|wdata|pointer to write data buffer|
|wlength|write data length in bytes|
|rdata|pointer to read data buffer|
|rlength|read data length in bytes|

## Returns

*true* - The request was placed successfully and the bus activity was initiated

*false* - The request fails, if there was already a transfer in progress when this function was called.

## Example

```c
uint8_t myTxData [NUM_BYTES] = {'1', '0', ' ', 'B', 'Y', 'T', 'E', 'S'};
uint8_t myRxData [NUM_BYTES] = {0};
    
    if(!SERCOM0_I2C_WriteRead( SLAVE_ADDR, &myTxData[0], NUM_BYTES, myRxData, NUM_BYTES ))
    {
        // error handling
    }
    
```

## Remarks

Calling this function is not the same as calling the SERCOMx\_I2C\_Write\(\) function and then calling the SERCOMx\_I2C\_Read\(\) function. The SERCOMx\_I2C\_WriteRead function will insert a Repeated Start condition between the Write and the Read stages. The SERCOMx\_I2C\_Write\(\) and the SERCOMx\_I2C\_Read\(\) function generates a stop condition after the write and the read has completed.

