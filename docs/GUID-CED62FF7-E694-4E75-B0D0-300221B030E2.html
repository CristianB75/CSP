<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE11" /><meta name="copyright" content="(C) Copyright 2022" />
<meta name="DC.rights.owner" content="(C) Copyright 2022" />
<meta name="DC.type" content="topic" />
<meta name="DC.title" content="MEM2MEM_ChannelTransfer Function" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="mem2mem-channeltransfer-function" />
<link rel="stylesheet" type="text/css" href="stylesheets/commonltr.css" />
<link rel="stylesheet" type="text/css" href="stylesheets/atmel.css" />
<link rel="stylesheet" type="text/css" href="./stylesheets/common-extended.css" /><title>MEM2MEM_ChannelTransfer Function</title>
<meta name="Microsoft.Help.Id" content="GUID-1EA9B250-D935-443A-9FA9-C48E50D229E8-mem2mem-channeltransfer-function" />
<meta name="Microsoft.Help.TocParent" content="GUID-1EA9B250-D935-443A-9FA9-C48E50D229E8" />
<meta name="Microsoft.Help.TocOrder" content="0" />
<meta name="Microsoft.Help.Locale" content="en-US" />
<meta name="Microsoft.Help.TopicLocale" content="en-US" />
<meta name="Microsoft.Help.DisplayVersion" content="MPLABÂ® Harmony Peripheral Libraries Reference A 09/2021" />
<script language="javascript">
       
       if (window.parent.location.protocol != 'file:') {
				document.addEventListener('click', function(e) {
				    if (e.target) {
               if (e.target.nodeName == "A" ) {
                    if (!e.target.target) {
                      e.preventDefault();
                      e.stopPropagation();
                              
                      var origUrl = window.parent.location.href.substr(0, window.parent.location.href.indexOf("?"));
                      if (origUrl.length === 0) {
                          origUrl = window.parent.location.href;
                      }
                      var href= e.target.getAttribute("href");
                      var parts = href.split("#");
          
                      var url = "";
                      if (parts.length == 2 ) {
                        if (!parts[0].length) {
                            url = window.parent.location.search.replace('?','')
                        } else {
                            url = parts[0].replace('.html','');
                        }
                      } else {
                        url = parts[0].replace('.html','');
                      }

                      if (parts.length == 2) {
                          url += "#" + parts[1];
                      }
    
                      window.parent.location.href = origUrl + "?" + url;

                      return false;
                    }
               }
            }
				});
			}

		</script><script language="javascript">
        function cpy(id, button) {
        
            var element = document.getElementById(id);
            var content = element.getAttribute("content");
            var textArea = document.createElement("textarea");
            
            // Place in the top-left corner of screen regardless of scroll position.
            textArea.style.position = 'fixed';
            textArea.style.top = 0;
            textArea.style.left = 0;
            
            // Ensure it has a small width and height. Setting to 1px / 1em
            // doesn't work as this gives a negative w/h on some browsers.
            textArea.style.width = '2em';
            textArea.style.height = '2em';
            
            // We don't need padding, reducing the size if it does flash render.
            textArea.style.padding = 0;
            
            // Clean up any borders.
            textArea.style.border = 'none';
            textArea.style.outline = 'none';
            textArea.style.boxShadow = 'none';
            
            // Avoid flash of the white box if rendered for any reason.
            textArea.style.background = 'transparent';
            
            
            textArea.value = content;
            
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
               var successful = document.execCommand('copy');
               var msg = successful ? 'successful' : 'unsuccessful';
               if (!button.classList.contains("copied")){
                  button.textContent = "Copied";
                  button.classList.add("copied");
                  setTimeout(function(){
                    button.textContent = "Copy";
                    button.classList.remove("copied");
                  },1000);
               }
            } catch (err) {
              console.log('Oops, unable to copy');
            }
            
            document.body.removeChild(textArea);
        }
      </script><script language="javascript">
          
          // Add the MathML namespace to html
          var html = document.getElementsByTagName("html")[0],
          head = document.getElementsByTagName("head")[0];
          
          var mathJax = document.createElement("script");
          mathJax.src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML";
          head.appendChild(mathJax);
          
          html.setAttribute("xmlns:m","http://www.w3.org/1998/Math/MathML");
          
          function inIframe() { try { return window.self !== window.top; } catch (e) { return true; } }
          
          if (!inIframe()) { 
          
          var Default = "index.html?GUID-CED62FF7-E694-4E75-B0D0-300221B030E2"; 
          
          var displaylocation = "value" + window.location.href;
          
          var GUIDS = displaylocation.split('GUID');          
          
          if (displaylocation.indexOf('#GUID') != -1) {            
          var First = GUIDS[1].split('.html');  
          if (GUIDS[3]){First = GUIDS[2].split('.html');}
          if (GUIDS[4]){First = GUIDS[3].split('.html');}
          if (GUIDS[5]){First = GUIDS[4].split('.html');}
          
          var Second = GUIDS[2].split('#');   
          if (GUIDS[3]){Second = GUIDS[3].split('#');}
          if (GUIDS[4]){Second = GUIDS[4].split('#');}
          if (GUIDS[5]){Second = GUIDS[5].split('#');}
          
          Default = "index.html?" + "GUID" + First[0] + "GUID" + Second[0];     
          }                    
          window.top.location = Default;
          }       
          
        </script><style xml:space="">
        
          button.copy-code{
            display:none;
            padding:0.7em 1.4em;
            margin:0 0.3em 0.3em 0;
            border-radius:0.15em;
            box-sizing: border-box;
            text-decoration:none;
            font-family:'Roboto',sans-serif;
            text-transform:uppercase;
            font-weight:400;
            color:#FFFFFF;
            background-color:#9c9c9c;
            box-shadow:inset 0 -0.6em 0 -0.35em rgba(0,0,0,0.17);
            text-align:center;
            position:relative;
            border: 0;
            float: right;
            border-radius: .5em;
            cursor: pointer;
          }
          button.copy-code:active{
            top:0.1em;
          }
          
          pre:hover button.copy-code{
            display: inline-block !important;
          }
          button.copy-code.copied {
            cursor: default !important;
          }
          
          
          @media all and (max-width:30em){
            button.copy-code{
              display:block;
              margin:0.4em auto;
            }
          }
        
        
      </style></head>
<body id="mem2mem-channeltransfer-function">
<h1 class="title topictitle1" id="ariaid-title1">MEM2MEM_ChannelTransfer Function</h1><div class="body"></div>
<div class="topic nested1" aria-labelledby="ariaid-title2" id="c"><h2 class="title topictitle2" id="ariaid-title2">C</h2><div class="body"><pre class="pre codeblock language-c"><button title="Copy Code" class="copy-code" onclick="cpy('d683653e14', this);">Copy</button><code id="d683653e14" content="bool MEM2MEM_ChannelTransfer(const void *srcAddr, const void *destAddr, size_t blockSize, MEM2MEM_TRANSFER_WIDTH twidth)">bool <span class="ph token function">MEM2MEM_ChannelTransfer</span><span class="ph token punctuation">(</span><span class="ph token keyword">const</span> <span class="ph token keyword">void</span> <span class="ph token operator">*</span>srcAddr<span class="ph token punctuation">,</span> <span class="ph token keyword">const</span> <span class="ph token keyword">void</span> <span class="ph token operator">*</span>destAddr<span class="ph token punctuation">,</span> size_t blockSize<span class="ph token punctuation">,</span> MEM2MEM_TRANSFER_WIDTH twidth<span class="ph token punctuation">)</span></code></pre></div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title3" id="summary"><h2 class="title topictitle2" id="ariaid-title3">Summary</h2><div class="body"><p class="p">Registers a DMA transfer using MEM2MEM.</p>
</div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title4" id="description"><h2 class="title topictitle2" id="ariaid-title4">Description</h2><div class="body"><p class="p">This function schedules a DMA transfer and starts the transfer.</p>
<p class="p">The srcAddr parameter specifies the source address from where data will be
transferred. Once the transfer is registered the module will transfer
blockSize of data from the source address in twidth chunks.</p>
<p class="p">If the requesting client registered a callback function before
calling the channel transfer function, this function will be called when the
transfer completes. The callback function will be called with a
MEM2MEM_TRANSFER_COMPLETE event if the transfer was processed successfully and
a MEM2MEM_TRANSFER_ERROR event if the transfer was not processed successfully.</p>
<p class="p">When already a transfer is in progress, this API will return false indicating
that transfer request is not accepted.</p>
</div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title5" id="precondition"><h2 class="title topictitle2" id="ariaid-title5">Precondition</h2><div class="body"><p class="p">None.</p>
</div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title6" id="parameters"><h2 class="title topictitle2" id="ariaid-title6">Parameters</h2><div class="body">
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><col style="width:" /><col style="width:" /><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="text-align:left;vertical-align:middle;" id="d683653e84"><span>Param</span></th>
<th class="entry cellrowborder" style="text-align:left;vertical-align:middle;" id="d683653e86"><span>Description</span></th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d683653e84 "><span>srcAddr</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d683653e86 "><span>Source address of the MEM2MEM transfer</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d683653e84 "><span>destAddr</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d683653e86 "><span>Destination address of the MEM2MEM transfer</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d683653e84 "><span>blockSize</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d683653e86 "><span>Size of the transfer block in bytes</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d683653e84 "><span>twidth</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d683653e86 "><span>chank size for the transfer</span></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title7" id="returns"><h2 class="title topictitle2" id="ariaid-title7">Returns</h2><div class="body"><p class="p"><em class="ph i">True</em> - If transfer request is accepted.</p>
<p class="p"><em class="ph i">False</em> - If previous transfer is in progress and the request is rejected.</p>
</div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title8" id="example"><h2 class="title topictitle2" id="ariaid-title8">Example</h2><div class="body"><pre class="pre codeblock language-c"><button title="Copy Code" class="copy-code" onclick="cpy('d683653e125', this);">Copy</button><code id="d683653e125" content="// Transfer 10 bytes of data from one buffer to another using MEM2MEM&#xA;MY_APP_OBJ myAppObj;&#xA;uint8_t buf[10] = {0,1,2,3,4,5,6,7,8,9};&#xA;uint8_t buf_sdram[10] = {};&#xA;    void *srcAddr = (uint8_t *) buf;&#xA;    void *destAddr = (uin8_t*) buf2;&#xA;    size_t size = 10;&#xA;    &#xA;    // User registers an event handler with PLIB. This is done once.&#xA;    MEM2MEM_ChannelCallbackRegister(APP_MEM2MEMTransferEventHandler,&#xA;    (uintptr_t)&amp;myAppObj);&#xA;    &#xA;    if(MEM2MEM_ChannelTransfer(srcAddr, destAddr, size, MEM2MEM_TRANSFER_WIDTH_BYTE) == true)&#xA;    {&#xA;        // do something&#xA;    }&#xA;    else&#xA;    {&#xA;        // try again?&#xA;    }"><span class="ph token comment">// Transfer 10 bytes of data from one buffer to another using MEM2MEM</span>
MY_APP_OBJ myAppObj<span class="ph token punctuation">;</span>
uint8_t buf<span class="ph token punctuation">[</span><span class="ph token number">10</span><span class="ph token punctuation">]</span> <span class="ph token operator">=</span> <span class="ph token punctuation">{</span><span class="ph token number">0</span><span class="ph token punctuation">,</span><span class="ph token number">1</span><span class="ph token punctuation">,</span><span class="ph token number">2</span><span class="ph token punctuation">,</span><span class="ph token number">3</span><span class="ph token punctuation">,</span><span class="ph token number">4</span><span class="ph token punctuation">,</span><span class="ph token number">5</span><span class="ph token punctuation">,</span><span class="ph token number">6</span><span class="ph token punctuation">,</span><span class="ph token number">7</span><span class="ph token punctuation">,</span><span class="ph token number">8</span><span class="ph token punctuation">,</span><span class="ph token number">9</span><span class="ph token punctuation">}</span><span class="ph token punctuation">;</span>
uint8_t buf_sdram<span class="ph token punctuation">[</span><span class="ph token number">10</span><span class="ph token punctuation">]</span> <span class="ph token operator">=</span> <span class="ph token punctuation">{</span><span class="ph token punctuation">}</span><span class="ph token punctuation">;</span>
    <span class="ph token keyword">void</span> <span class="ph token operator">*</span>srcAddr <span class="ph token operator">=</span> <span class="ph token punctuation">(</span>uint8_t <span class="ph token operator">*</span><span class="ph token punctuation">)</span> buf<span class="ph token punctuation">;</span>
    <span class="ph token keyword">void</span> <span class="ph token operator">*</span>destAddr <span class="ph token operator">=</span> <span class="ph token punctuation">(</span>uin8_t<span class="ph token operator">*</span><span class="ph token punctuation">)</span> buf2<span class="ph token punctuation">;</span>
    size_t size <span class="ph token operator">=</span> <span class="ph token number">10</span><span class="ph token punctuation">;</span>
    
    <span class="ph token comment">// User registers an event handler with PLIB. This is done once.</span>
    <span class="ph token function">MEM2MEM_ChannelCallbackRegister</span><span class="ph token punctuation">(</span>APP_MEM2MEMTransferEventHandler<span class="ph token punctuation">,</span>
    <span class="ph token punctuation">(</span>uintptr_t<span class="ph token punctuation">)</span><span class="ph token operator">&amp;</span>myAppObj<span class="ph token punctuation">)</span><span class="ph token punctuation">;</span>
    
    <span class="ph token keyword">if</span><span class="ph token punctuation">(</span><span class="ph token function">MEM2MEM_ChannelTransfer</span><span class="ph token punctuation">(</span>srcAddr<span class="ph token punctuation">,</span> destAddr<span class="ph token punctuation">,</span> size<span class="ph token punctuation">,</span> MEM2MEM_TRANSFER_WIDTH_BYTE<span class="ph token punctuation">)</span> <span class="ph token operator">==</span> true<span class="ph token punctuation">)</span>
    <span class="ph token punctuation">{</span>
        <span class="ph token comment">// do something</span>
    <span class="ph token punctuation">}</span>
    <span class="ph token keyword">else</span>
    <span class="ph token punctuation">{</span>
        <span class="ph token comment">// try again?</span>
    <span class="ph token punctuation">}</span></code></pre></div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title9" id="remarks"><h2 class="title topictitle2" id="ariaid-title9">Remarks</h2><div class="body"><p class="p">None.</p>
</div>
</div>
</body>
</html>