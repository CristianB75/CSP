# Quadrature Encoder Interface \(QEI\)

The Quadrature Encoder Interface \(QEI\) module provides the interface to incremental encoders for obtaining mechanical position data. This module provides below features:

-   Four input pins: two phase signals, an index pulse and a home pulse

-   Programmable digital noise filters on inputs

-   Count direction status

-   Index \(INDX\) pulse to reset the position counter

-   General purpose 32-bit Timer/Counter mode

-   Interrupts generated by QEI or counter events

-   32-bit velocity counter

-   32-bit position counter

-   32-bit index pulse counter

-   32-bit interval timer

-   32-bit position Initialization/Capture register

-   32-bit Compare Less Than and Greater Than registers


**Using The Library**

Quadrature encoder signals Phase A, Phase B and an optional index signal and an optional home signal are connected to the QEI peripheral. The quadrature decoder in the QEI peripheral processes these signals with an internal counter to get the position, velocity and revolution count. The quadrature decoder increments or decrements the 32-bit Up/Down Counter for each change of state. The counter increments when QEA leads QEB and decrements when QEB leads QEA

**Library Interface**

Peripheral library provides the following interfaces:

**Functions**

|Name|Description|
|----|-----------|
|QEIx\_Initialize|Initializes given instance of QEI peripheral in quadrature mode|
|QEIx\_Start|Starts the given QEI instance counter|
|QEIx\_Stop|Stops the given QEI instance counter|
|QEIx\_PositionGet|Reads the position from the quadrature encoder|
|QEIx\_VelocityGet|Reads the velocity counter from the quadrature encoder|
|QEIx\_RevolutionsGet|Reads the number of revolutions tracked by the quadrature encoder|
|QEIx\_CallbackRegister|Registers the function to be called from interrupt|

**Data types and constants**

|Name|Type|Description|
|----|----|-----------|
|QEI\_INTERRUPT|Enum|Identifies Quadrature mode interrupt source|
|QEI\_STATUS|Enum|Identifies Quadrature mode interrupt source mask|
|QEI\_CALLBACK|Typedef|Defines the function pointer data type and function signature for the qei peripheral callback function|

-   **[QEIx\_VelocityGet Function](GUID-EA449157-349B-4D8A-9FCC-709951D566E8.md)**  

-   **[QEIx\_Stop Function](GUID-F30C9F10-AC8B-4434-8548-DD55BA625D4D.md)**  

-   **[QEIx\_Start Function](GUID-856192ED-D4FD-4952-8DD2-0AB9F781C64D.md)**  

-   **[QEIx\_RevolutionsGet Function](GUID-FB6CF212-B1DB-4E1B-84FD-B60B959E4C00.md)**  

-   **[QEIx\_PositionGet Function](GUID-B1261681-00FC-4438-80B5-94F27A7C9F26.md)**  

-   **[QEIx\_Initialize Function](GUID-1617EA04-D0B1-4CA9-961E-2602A1935D97.md)**  

-   **[QEIx\_CallbackRegister Function](GUID-02BDAF13-CE65-4D40-AAE7-C0AF690AB346.md)**  

-   **[QEI\_STATUS Enum](GUID-DD50F7CB-34FA-4D41-99A0-29ECFB3650D0.md)**  

-   **[QEI\_INTERRUPT Enum](GUID-278A40B6-3E60-436A-A0CF-145792ADF0B0.md)**  

-   **[QEI\_CALLBACK Typedef](GUID-2F3DDC4C-6730-4304-AC78-360613CCB9FC.md)**  


**Parent topic:**[PIC32MK GPD GPE MCF Peripheral Libraries](GUID-A63F4C14-72E7-44D7-9C70-A48BBD41B583.md)

**Parent topic:**[PIC32MK GPG MCJ Peripheral Libraries](GUID-A0350A48-03F7-4370-A6C5-612386A4ABAC.md)

**Parent topic:**[PIC32MK GPK MCM Peripheral Libraries](GUID-801B9DE7-4616-4E38-BF86-C82B78A4F430.md)

**Parent topic:**[PIC32MK MCA Peripheral Libraries](GUID-E11C5899-DD12-4B78-8076-8A415C20F144.md)

