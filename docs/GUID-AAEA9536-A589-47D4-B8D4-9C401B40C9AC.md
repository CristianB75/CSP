# Supply Controller \(SUPC\)

The Supply Controller controls the Embedded Voltage Regulators used by<br />the Core Power Supply and Backup Low Power Mode.

In Backup Low Power Mode the current consumption is reduced to a few<br />microamps for Backup power retention. Exit from this mode can be<br />achieved via multiple wake-up sources.

The Supply Controller also generates the Slow Clock \(SCLK\) by selecting<br />either the 22-42kHz Low Power RC oscillator or the 32kHz Low Power<br />Crystal oscillator.

The purpose of Backup Low Power Mode is to achieve the lowest power<br />consumption possible in a system that wakes up periodically in order to<br />perform tasks that do not require a fast startup time.

The supply controller, zero-power power-on reset, RTT, RTC, backup<br />registers, and 32kHz oscillator \(RC or crystal oscillator selected by<br />software\) are all running whilst the regulator and core supply are off.

Following wakeup sources can wakeup the device from backup mode.

-   14 Wakeup Inputs with Programmable Debouncing

-   Real-Time Clock Alarm

-   Real-Time Timer Alarm

-   Supply Monitor Detection on VDDIO, with Programmable Scan Period and Voltage Threshold


**Using The Library**

SUPC Peripheral library provides API's and they can be used to perform below functionalities.

-   To put the device either in Sleep, Backup or Wait mode.

-   To read and write the General Purpose Backup Register \(GPBR\).

-   Generate supply monitor callback to save critical data to prepare the system for a power down. Supply monitor can generate interrupt or Reset the device when supply voltage crosses below the specified threshold level.


The examples shows the code to enter sleep, backup and wait mode.

```c
while(1)
{
    switch(cmd)
    {
        case SLEEP_MODE:
        {
            SUPC_SleepModeEnter();
            break;
        }
        case WAIT_MODE:
        {
            SUPC_WaitModeEnter(PMC_FSMR_FLPM_FLASH_DEEP_POWERDOWN, WAITMODE_WKUP_WKUP7);
            break;
        }
        case BACKUP_MODE:
        {
            SUPC_BackupModeEnter();
            break;
        }
    }
}

```

**Library Interface**

Supply Controller peripheral library provides the following interfaces:

**Functions**

|Name|Description|
|----|-----------|
|SUPC\_Initialize|Initializes SUPC x module of the device|
|SUPC\_SleepModeEnter|Puts the device into Sleep mode|
|SUPC\_WaitModeEnter|Puts the device into Wait mode|
|SUPC\_BackupModeEnter|Puts the device into Backup mode|
|SUPC\_GPBRRead|Reads the data from General Purpose Backup Register\(GPBR\)|
|SUPC\_GPBRWrite|Writes data to the General Purpose Backup Register\(GPBR\)|
|SUPC\_CallbackRegister|Allows application to register callback with PLIB|

**Data types and constants**

|Name|Type|Description|
|----|----|-----------|
|WAITMODE\_WKUP\_SOURCE|Enum|Identifies the wakeup input source|
|WAITMODE\_FLASH\_STATE|Enum|Identifies Flash Low-power mode|
|SUPC\_CALLBACK|Typedef|Pointer to a SUPC callback function|

-   **[SUPC\_Initialize Function](GUID-D18356A1-3487-41FC-A6AA-5E425483A02C.md)**  

-   **[SUPC\_SleepModeEnter Function](GUID-288D82EB-F988-42B3-99DF-4E530D969731.md)**  

-   **[SUPC\_WaitModeEnter Function](GUID-EC8B2ACF-DA5F-4FC6-864F-19C696FFF5B2.md)**  

-   **[SUPC\_BackupModeEnter Function](GUID-B383B5E5-3D03-4190-AF66-703057BE29CD.md)**  

-   **[SUPC\_GPBRRead Function](GUID-20AC2BE9-89F9-4C9B-B1EB-7C923F89A04D.md)**  

-   **[SUPC\_GPBRWrite Function](GUID-77939506-0428-487A-812F-15C69EAA48A2.md)**  

-   **[SUPC\_CallbackRegister Function](GUID-9DDB551B-8196-4BD4-8E80-9F9FD071D4A1.md)**  

-   **[WAITMODE\_WKUP\_SOURCE Enum](GUID-208FE735-BC79-4BBF-9B42-F2C7C2CEE474.md)**  

-   **[WAITMODE\_FLASH\_STATE Enum](GUID-D8F21CB2-0A33-4787-B572-4726987AC700.md)**  

-   **[SUPC\_CALLBACK Typedef](GUID-4EE9E59D-17BD-485D-8EEA-8B7B0827BAE2.md)**  


**Parent topic:**[SAM E70 S70 V70 V71 Peripheral Libraries](GUID-6E45C146-6F6D-452A-A2E2-228C3CC905D7.md)

