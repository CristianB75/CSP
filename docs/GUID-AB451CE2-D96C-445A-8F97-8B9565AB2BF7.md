# CANx\_MessageReceive Function

**Parent topic:**[Control Area Network \(CAN\)](GUID-B5AC476B-B06A-4C89-AB15-1BB515862877.md)

**Parent topic:**[Controller Area Network \(CAN\)](GUID-87A954BC-99B5-448D-BC6D-4C2250A9B58E.md)

**Parent topic:**[Controller Area Network \(CAN\)](GUID-9E2CB6D3-5052-4DCE-9DD7-68CC12674833.md)

**Parent topic:**[Controller Area Network \(CAN\)](GUID-F5B9ED1E-1BBD-4120-8CF5-C3104BED03CA.md)

## C

The prototype of CANx\_MessageReceive\(\) varies based on device family. Refer to the generated header file for the actual prototype to be used.

```c
bool CANx_MessageReceive(uint32_t *id, uint8_t *length, uint8_t *data, uint16_t *timestamp, uint8_t fifoNum, CAN_MSG_RX_ATTRIBUTE *msgAttr) // x - Instance of the CAN peripheral

bool CANx_MessageReceive(uint32_t *id, uint8_t *length, uint8_t *data, uint32_t *timestamp, uint8_t fifoNum, CANFD_MSG_RX_ATTRIBUTE *msgAttr) // x - Instance of the CAN peripheral

bool CANx_MessageReceive(uint32_t *id, uint8_t *length, uint8_t *data, uint16_t *timestamp, CAN_MAILBOX_RX_ATTRIBUTE mailboxAttr, CAN_MSG_RX_ATTRIBUTE *msgAttr) // x - Instance of the CAN peripheral

bool CANx_MessageReceive(uint8_t bufferNumber, CAN_RX_BUFFER *rxBuffer) // x - Instance of the CAN peripheral
```

## Summary

Receives a message from CAN bus.

## Description

This routine receives a message from CAN bus.

## Precondition

CANx\_Initialize must have been called for the associated CAN instance.

## Parameters

|Param|Description|
|-----|-----------|
|id|Pointer to 11-bit / 29-bit identifier \(ID\) to be received.|
|length|Pointer to data length in number of bytes to be received.|
|data|Pointer to destination data buffer|
|timestamp|Pointer to Rx message timestamp, timestamp value is 0 if Timestamp is disabled|
|fifoNum|FIFO number|
|mailboxAttr|Mailbox type either RX Mailbox or RX Mailbox with overwrite|
|msgAttr|Data frame or Remote frame to be received|
|bufferNumber|Rx buffer number|
|rxBuffer|Pointer to Rx buffer|

## Returns

Request status.<br />*true* - Request was successful.

*false* - Request has failed.

## Example

```c
uint8_t rx_message[8], rx_messageLength;
uint32_t rx_messageID;
CAN_MSG_RX_ATTRIBUTE msgAttr;
CAN1_Initialize();
CAN1_MessageReceive(&rx_messageID, &rx_messageLength, rx_message, 0, 1, &msgAttr);
```

```c
uint8_t rx_message[8], rx_messageLength;
uint32_t rx_messageID;
CANFD_MSG_RX_ATTRIBUTE msgAttr;
CAN1_Initialize();
CAN1_MessageReceive(&rx_messageID, &rx_messageLength, rx_message, 0, 2, &msgAttr);
```

```c
uint8_t buf[8], id, length;
uint16_t timestamp = 0;
CAN_MSG_RX_ATTRIBUTE msgAttr;
CAN0_Initialize();
CAN0_MessageReceive(&id, &length, buf, &timestamp, CAN_MAILBOX_DATA_FRAME_RX_OVERWRITE, &msgAttr);
```

```c
uint8_t rxBuffer[CAN0_RX_BUFFER_SIZE];
memset(rxBuffer, 0x00, CAN0_RX_BUFFER_ELEMENT_SIZE);
// Read message from Rx Buffer 0
CAN0_MessageReceive(0, (CAN_RX_BUFFER *)rxBuffer);
```

## Remarks

None.

