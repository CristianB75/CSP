# Periodic Interval Timer \(PIT\)

The Periodic Interval Timer \(PIT\) provides the operating systemâ€™s scheduler interrupt. It is designed to offer maximum accuracy and efficient management, even for systems with long response time.

-   20-bit Programmable Counter plus 12-bit Interval Counter

-   Reset-on-read Feature

-   Both Counters Work on Master Clock/16


**Using The Library**

PIT peripheral library can be used to poll for a periodic timeout, generate periodic interrupts or generate timed waits. The following examples shows different modes of its usage.

**Polling method**

```c

int main ( void )
{
    int i;
    /* Initialize all modules */
    SYS_Initialize ( NULL );

    while ( true )
    {
        for (i=0; i<10; i++) {
            while(!PIT_TimerPeriodHasExpired());
            PIT_TimerRestart();
        }
        LED_BLUE_Toggle();
        /* Maintain state machines of all polled MPLAB Harmony modules. */
        SYS_Tasks ( );
    }

    /* Execution should not come here during normal operation */

    return ( EXIT_FAILURE );
}
```

**Interrupt Method**

```c

static void pit_callback(uintptr_t context)
{
    (void)context;
    LED_BLUE_Toggle();
}

int main ( void )
{
    /* Initialize all modules */
    SYS_Initialize ( NULL );
    
    PIT_TimerCallbackSet(pit_callback, NULL);
    
    PIT_TimerStart();

    while ( true )
    {
        /* Maintain state machines of all polled MPLAB Harmony modules. */
        SYS_Tasks ( );
    }

    /* Execution should not come here during normal operation */

    return ( EXIT_FAILURE );
}
```

**Delay routines**

```c
int main ( void )
{
    /* Initialize all modules */
    SYS_Initialize ( NULL );
    
    PIT_TimerCallbackSet(pit_callback, NULL);
    
    PIT_TimerStart();

    while ( true )
    {
        PIT_DelayMs(1000U);
        LED_BLUE_Toggle();
        /* Maintain state machines of all polled MPLAB Harmony modules. */
        SYS_Tasks ( );
    }

    /* Execution should not come here during normal operation */

    return ( EXIT_FAILURE );
}
```

**Library Interface**

Periodic Interval Timer peripheral library provides the following interfaces:

**Functions**

|Name|Description|
|----|-----------|
|PIT\_TimerInitialize|Initialize PIT registers per user configuration|
|PIT\_TimerRestart|Restart the PIT counter|
|PIT\_TimerStart|Start the PIT counter|
|PIT\_TimerStop|Stop the PIT counter|
|PIT\_TimerPeriodSet|Set the timer period value|
|PIT\_TimerPeriodGet|Get the timer period value|
|PIT\_TimerCounterGet|Get the timer counter value|
|PIT\_TimerCompareSet|Set the timer comparison value|
|PIT\_TimerFrequencyGet|Get the timer clock frequency|
|PIT\_TimerPeriodHasExpired|Return whether or not the Timer Period has expired|
|PIT\_DelayMs|Delays processing for x milliseconds|
|PIT\_DelayUs|Delays processing for x microseconds|
|PIT\_TimerCallbackSet|Register callback for PIT interrupt|
|PIT\_ClearInterrupt|PIT Clear Interrupt|

**Data types and constants**

|Name|Type|Description|
|----|----|-----------|
|PIT\_CALLBACK|Typedef|PIT Interrupt Callback Function definition|

-   **[PIT\_TimerInitialize Function](GUID-1871DD9E-1151-4177-B217-90BA32784684.md)**  

-   **[PIT\_ClearInterrupt Function](GUID-A6E9AD65-D23B-4BD4-B056-647A28E964EB.md)**  

-   **[PIT\_DelayMs Function](GUID-DDE247D6-1DBD-4158-B39A-C7F5E71DA530.md)**  

-   **[PIT\_DelayUs Function](GUID-9D3D2055-190F-45F8-B47B-7FD4598C4C6A.md)**  

-   **[PIT\_TimerCallbackSet Function](GUID-02FBD76A-8087-445E-997A-68AA4D354E7A.md)**  

-   **[PIT\_TimerCompareSet Function](GUID-91C004E4-8B49-47E5-826F-0CF1BC4C03D5.md)**  

-   **[PIT\_TimerCounterGet Function](GUID-9AF934C2-7CF4-4958-9174-3FE2FC46335A.md)**  

-   **[PIT\_TimerFrequencyGet Function](GUID-1A657C9B-B4B7-4165-A298-46D627888EDD.md)**  

-   **[PIT\_TimerPeriodGet Function](GUID-9B2C1437-8E47-45F1-8CB5-630725990C7B.md)**  

-   **[PIT\_TimerPeriodHasExpired Function](GUID-4274A7C7-FDA9-4C75-A81F-F335D58D92E0.md)**  

-   **[PIT\_TimerPeriodSet Function](GUID-A6069B39-A041-40A4-B64F-577D38D10BC0.md)**  

-   **[PIT\_TimerRestart Function](GUID-9D6A326F-F61D-4D1A-8630-8C8BBCBDCF88.md)**  

-   **[PIT\_TimerStart Function](GUID-311E9E0B-8D09-4563-BE87-4098B55FEEC9.md)**  

-   **[PIT\_TimerStop Function](GUID-97A5697A-4E9B-4082-BDB2-573CA833C447.md)**  

-   **[PIT\_CALLBACK Typedef](GUID-699B8D72-1D35-4744-9B6F-9EAD59DB79CE.md)**  


**Parent topic:**[SAM 9X60 Peripheral Libraries](GUID-CCAAC7F0-6BA8-4630-91AE-69718D188CBF.md)

**Parent topic:**[SAM 9X7 Peripheral Libraries](GUID-FB6741AA-355E-483F-9727-37728953D583.md)

**Parent topic:**[SAM A5D2 Peripheral Libraries](GUID-F6605EDC-FC71-4081-8560-0C1681C1FA8D.md)

**Parent topic:**[SAM A7G5 Peripheral Libraries](GUID-7EEB1AC5-4BFF-4259-97AD-8CF7367D7973.md)

