# Direct Memory Access Controller \(DMAC\)

The DMA Controller \(DMAC\) can transfer data between memories and<br />peripherals, and thus off-load these tasks from the CPU. It enables<br />high data transfer rates with minimum CPU intervention, and frees up<br />CPU time. With access to all peripherals, the DMAC can handle automatic<br />transfer of data between communication modules. DMAC has several DMA<br />channels and each channel is fully programmable and provides both<br />peripheral or memory-to-memory transfers.

The DMA Controller can also be used to generate CRC on the data been transferred<br />through the channel or an I/O interface.

**Using The Library**

DMA controller requires source address, destination address and<br />transfer count to initiate transfer. It transfers data on each DMA<br />trigger and decrements the transfer count. The DMA generates completion<br />interrupt to notify CPU at the end of the DMA transfer.

User can use either callback mechanism or polling mechanism to<br />determine DMA completion.

-   With polling, the application will need to continuously poll to<br />check if the DMA has completed the transfer.

-   With callback, the registered callback function will be called when<br />the transfer is completed. This means the application do not have to<br />poll continuously.


**Callback method**

This example demonstrates DMA transfer with callback

```c
#define USART1_TRANSMIT_ADDRESS     (&SERCOM4_REGS->USART.DATA)

uint8_t txBuffer[] = "Hello World!";

void DMAC_Callback(DMAC_TRANSFER_EVENT status, uintptr_t context)
{
      if(status == DMAC_TRANSFER_EVENT_COMPLETE)
      {
           // Transfer is completed.
      }
}

 int main ( void )
{
      SYS_Initialize ( NULL );

      DMAC_ChannelCallbackRegister(DMAC_CHANNEL_0, DMAC_Callback, 0);

      DMAC_ChannelTransfer(DMAC_CHANNEL_0, txBuffer, (const void *)USART1_TRANSMIT_ADDRESS, sizeof(txBuffer));

}
```

**Polling method**

This example demonstrates DMA transfer with polling

```c
#define USART1_TRANSMIT_ADDRESS     (&SERCOM4_REGS->USART.DATA)

uint8_t txBuffer[] = "Hello World!";

int main ( void )
{
      SYS_Initialize ( NULL );

      DMAC_ChannelTransfer(DMAC_CHANNEL_0, txBuffer, (const void *)USART1_TRANSMIT_ADDRESS, sizeof(txBuffer));

      while(DMAC_ChannelIsBusy(DMAC_CHANNEL_0));
}

```

**Library Interface**

Direct Memory Access Controller peripheral library provides the following interfaces:

**Functions**

|Name|Description|
|----|-----------|
|DMAC\_Initialize|Initializes the DMAC controller of the device|
|DMAC\_ChannelCallbackRegister|This function allows a DMAC PLIB client to set an event handler|
|DMAC\_ChannelTransfer|Schedules a DMA transfer on the specified DMA channel|
|DMAC\_ChannelIsBusy|The function returns the busy status of the channel|
|DMAC\_ChannelTransferStatusGet|Returns the DMA channel's transfer status|
|DMAC\_ChannelDisable|The function disables the specified DMAC channel|
|DMAC\_ChannelGetTransferredCount|Returns transfer count of the ongoing DMAC transfer|
|DMAC\_ChannelSuspend|This function Suspends the DMA channel|
|DMAC\_ChannelResume|This function Resumes the DMA channel|
|DMAC\_LinkedListDescriptorSetup|Sets up linked list descriptor|
|DMAC\_ChannelLinkedListTransfer|The function submit a list of DMA transfers|
|DMAC\_ChannelSettingsGet|Returns the current channel settings for the specified DMAC Channel|
|DMAC\_ChannelSettingsSet|Changes the current transfer settings of the specified DMAC channel|
|DMAC\_ChannelCRCSetup|DMA Channel CRC setup and enable function|
|DMAC\_CRCRead|DMA CRC read function|
|DMAC\_CRCCalculate|Function to calculate CRC using I/O Interface|
|DMAC\_CRCDisable|DMA CRC disable function|

**Data types and constants**

|Name|Type|Description|
|----|----|-----------|
|DMAC\_CHANNEL|Enum|Lists the set of channels available for data transfer using DMAC|
|DMAC\_TRANSFER\_EVENT|Enum|Enumeration of possible DMAC transfer events|
|DMAC\_CRC\_POLYNOMIAL\_TYPE|Enum|Enumeration of Supported CRC polynomials|
|DMAC\_CRC\_BEAT\_SIZE|Enum|Enumeration of Supported CRC Beat Size|
|DMAC\_CRC\_SETUP|Struct|Fundamental data object that represents DMA CRC setup parameters|
|DMAC\_CHANNEL\_CALLBACK|Typedef|Pointer to a DMAC Transfer Event handler function|
|DMAC\_CHANNEL\_CONFIG|Typedef|DMAC Block Transfer Control configuration value|

-   **[DMAC\_Initialize Function](GUID-261C3DF5-FFB1-4D76-ADE9-988D89181C61.md)**  

-   **[DMAC\_ChannelCallbackRegister Function](GUID-B8FE6AE4-1D21-477A-8FD9-9BBA33A206DD.md)**  

-   **[DMAC\_ChannelTransfer Function](GUID-71621AC1-CB46-452A-8965-216A515ED112.md)**  

-   **[DMAC\_ChannelIsBusy Function](GUID-B4F0F7E0-C06D-4D7F-B02C-F47668838D69.md)**  

-   **[DMAC\_ChannelTransferStatusGet Function](GUID-93C9D41B-6D98-4BC3-BC86-6AE322522217.md)**  

-   **[DMAC\_ChannelDisable Function](GUID-3C8B2338-A727-46C9-8744-D728FB0445DE.md)**  

-   **[DMAC\_ChannelGetTransferredCount Function](GUID-86781118-8190-4C56-9A67-9CF613314FA6.md)**  

-   **[DMAC\_ChannelSuspend Function](GUID-8F75F012-1760-40E1-99F5-9026F0F02211.md)**  

-   **[DMAC\_ChannelResume Function](GUID-359F010E-20C8-45E4-A9BB-CCB8E0F49118.md)**  

-   **[DMAC\_LinkedListDescriptorSetup Function](GUID-FDE50EE1-D9D2-46BD-87C6-9EA26979DE30.md)**  

-   **[DMAC\_ChannelLinkedListTransfer Function](GUID-02FFA8E1-4AF6-42C9-9F68-03C7D4B5FCBF.md)**  

-   **[DMAC\_ChannelSettingsGet Function](GUID-566D59AC-4639-437B-BEC3-392290D9A77D.md)**  

-   **[DMAC\_ChannelSettingsSet Function](GUID-3BEBE0E8-5A20-4652-9396-196C36D61AC6.md)**  

-   **[DMAC\_ChannelCRCSetup Function](GUID-FAD480EF-D06B-473F-B0FF-2C27848F7375.md)**  

-   **[DMAC\_CRCRead Function](GUID-58F71908-4E17-4EBB-9563-E6DB645AF40F.md)**  

-   **[DMAC\_CRCCalculate Function](GUID-B9C36FBF-73B3-4B88-AA7E-ED07A6130F25.md)**  

-   **[DMAC\_CRCDisable Function](GUID-B93122B1-ACB0-4FB7-8ECB-F2F40BBB4944.md)**  

-   **[DMAC\_CHANNEL Enum](GUID-2B331DE2-07FE-4B0E-AB37-AA73198F6CA2.md)**  

-   **[DMAC\_TRANSFER\_EVENT Enum](GUID-1A98AC4A-1DA4-47B7-B03B-1ADFFCC4A100.md)**  

-   **[DMAC\_CRC\_POLYNOMIAL\_TYPE Enum](GUID-31B17B9F-CA65-4873-AC3A-EE1CD25317CC.md)**  

-   **[DMAC\_CRC\_BEAT\_SIZE Enum](GUID-2868D4E3-951F-4B78-A412-97310296BAA1.md)**  

-   **[DMAC\_CRC\_SETUP Struct](GUID-C618105D-F468-4BA6-B959-95EC12FE73FE.md)**  

-   **[DMAC\_CHANNEL\_CALLBACK Typedef](GUID-061BC54B-9778-4314-9CED-D43DBD08E2DC.md)**  

-   **[DMAC\_CHANNEL\_CONFIG Typedef](GUID-79352FD6-69A3-416C-9EF4-53517587591B.md)**  


**Parent topic:**[PIC32CM JH00 JH01 Peripheral Libraries](GUID-05924E45-D6B3-4F33-A5EA-9B080FC421D8.md)

**Parent topic:**[PIC32CM LE00 LS00 LS60 Peripheral Libraries](GUID-F80F1B47-C3E4-4803-ACB6-D30AC5EB7B45.md)

**Parent topic:**[PIC32CM MC00 Peripheral Libraries](GUID-ADF45DC0-B32C-4D1F-9332-59EC0DF5097E.md)

**Parent topic:**[SAM C20 C21 Peripheral Libraries](GUID-49072E61-B7F2-4B32-952E-D6F5FB361AFB.md)

**Parent topic:**[SAM D09 D10 D11 Peripheral Libraries](GUID-F4788319-C5F3-4EB3-8CC7-05770A2EBD32.md)

**Parent topic:**[SAM D20 D21 Peripheral Libraries](GUID-86A69A90-EDAB-465F-A03A-57CD8BF54AE8.md)

**Parent topic:**[SAM DA1 Peripheral Libraries](GUID-0CDE5F35-9BE3-4484-8299-98161C496C00.md)

**Parent topic:**[SAM HA1 Peripheral Libraries](GUID-7E583BB3-CBFA-4862-8ED5-40D747167457.md)

**Parent topic:**[SAM L1X Peripheral Libraries](GUID-D259BBBC-6BC2-4F69-849B-C06DF4DDD5F8.md)

**Parent topic:**[SAM L21 Peripheral Libraries](GUID-230EF724-3CDA-4F88-8E42-0EF4C1CA112D.md)

**Parent topic:**[SAM L22 Peripheral Libraries](GUID-C3997EBF-87A0-4DD9-BCB0-C8A58B62E44B.md)

