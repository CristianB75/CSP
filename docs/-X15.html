<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE11" /><meta name="copyright" content="(C) Copyright 2022" />
<meta name="DC.rights.owner" content="(C) Copyright 2022" />
<meta name="DC.type" content="topic" />
<meta name="DC.title" content="DSU_CRCCalculate Function" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="dsu-crccalculate-function" />
<link rel="stylesheet" type="text/css" href="stylesheets/commonltr.css" />
<link rel="stylesheet" type="text/css" href="stylesheets/atmel.css" />
<link rel="stylesheet" type="text/css" href="./stylesheets/common-extended.css" /><title>DSU_CRCCalculate Function</title>
<meta name="Microsoft.Help.Id" content="GUID-1EA9B250-D935-443A-9FA9-C48E50D229E8-dsu-crccalculate-function" />
<meta name="Microsoft.Help.TocParent" content="GUID-1EA9B250-D935-443A-9FA9-C48E50D229E8" />
<meta name="Microsoft.Help.TocOrder" content="0" />
<meta name="Microsoft.Help.Locale" content="en-US" />
<meta name="Microsoft.Help.TopicLocale" content="en-US" />
<meta name="Microsoft.Help.DisplayVersion" content="MPLABÂ® Harmony Peripheral Libraries Reference A 09/2021" />
<script language="javascript">
       
       if (window.parent.location.protocol != 'file:') {
				document.addEventListener('click', function(e) {
				    if (e.target) {
               if (e.target.nodeName == "A" ) {
                    if (!e.target.target) {
                      e.preventDefault();
                      e.stopPropagation();
                              
                      var origUrl = window.parent.location.href.substr(0, window.parent.location.href.indexOf("?"));
                      if (origUrl.length === 0) {
                          origUrl = window.parent.location.href;
                      }
                      var href= e.target.getAttribute("href");
                      var parts = href.split("#");
          
                      var url = "";
                      if (parts.length == 2 ) {
                        if (!parts[0].length) {
                            url = window.parent.location.search.replace('?','')
                        } else {
                            url = parts[0].replace('.html','');
                        }
                      } else {
                        url = parts[0].replace('.html','');
                      }

                      if (parts.length == 2) {
                          url += "#" + parts[1];
                      }
    
                      window.parent.location.href = origUrl + "?" + url;

                      return false;
                    }
               }
            }
				});
			}

		</script><script language="javascript">
        function cpy(id, button) {
        
            var element = document.getElementById(id);
            var content = element.getAttribute("content");
            var textArea = document.createElement("textarea");
            
            // Place in the top-left corner of screen regardless of scroll position.
            textArea.style.position = 'fixed';
            textArea.style.top = 0;
            textArea.style.left = 0;
            
            // Ensure it has a small width and height. Setting to 1px / 1em
            // doesn't work as this gives a negative w/h on some browsers.
            textArea.style.width = '2em';
            textArea.style.height = '2em';
            
            // We don't need padding, reducing the size if it does flash render.
            textArea.style.padding = 0;
            
            // Clean up any borders.
            textArea.style.border = 'none';
            textArea.style.outline = 'none';
            textArea.style.boxShadow = 'none';
            
            // Avoid flash of the white box if rendered for any reason.
            textArea.style.background = 'transparent';
            
            
            textArea.value = content;
            
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
               var successful = document.execCommand('copy');
               var msg = successful ? 'successful' : 'unsuccessful';
               if (!button.classList.contains("copied")){
                  button.textContent = "Copied";
                  button.classList.add("copied");
                  setTimeout(function(){
                    button.textContent = "Copy";
                    button.classList.remove("copied");
                  },1000);
               }
            } catch (err) {
              console.log('Oops, unable to copy');
            }
            
            document.body.removeChild(textArea);
        }
      </script><script language="javascript">
          
          // Add the MathML namespace to html
          var html = document.getElementsByTagName("html")[0],
          head = document.getElementsByTagName("head")[0];
          
          var mathJax = document.createElement("script");
          mathJax.src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML";
          head.appendChild(mathJax);
          
          html.setAttribute("xmlns:m","http://www.w3.org/1998/Math/MathML");
          
          function inIframe() { try { return window.self !== window.top; } catch (e) { return true; } }
          
          if (!inIframe()) { 
          
          var Default = "index.html?GUID-136997B1-436D-41CA-A465-CF1C8E7F0B07"; 
          
          var displaylocation = "value" + window.location.href;
          
          var GUIDS = displaylocation.split('GUID');          
          
          if (displaylocation.indexOf('#GUID') != -1) {            
          var First = GUIDS[1].split('.html');  
          if (GUIDS[3]){First = GUIDS[2].split('.html');}
          if (GUIDS[4]){First = GUIDS[3].split('.html');}
          if (GUIDS[5]){First = GUIDS[4].split('.html');}
          
          var Second = GUIDS[2].split('#');   
          if (GUIDS[3]){Second = GUIDS[3].split('#');}
          if (GUIDS[4]){Second = GUIDS[4].split('#');}
          if (GUIDS[5]){Second = GUIDS[5].split('#');}
          
          Default = "index.html?" + "GUID" + First[0] + "GUID" + Second[0];     
          }                    
          window.top.location = Default;
          }       
          
        </script><style xml:space="">
        
          button.copy-code{
            display:none;
            padding:0.7em 1.4em;
            margin:0 0.3em 0.3em 0;
            border-radius:0.15em;
            box-sizing: border-box;
            text-decoration:none;
            font-family:'Roboto',sans-serif;
            text-transform:uppercase;
            font-weight:400;
            color:#FFFFFF;
            background-color:#9c9c9c;
            box-shadow:inset 0 -0.6em 0 -0.35em rgba(0,0,0,0.17);
            text-align:center;
            position:relative;
            border: 0;
            float: right;
            border-radius: .5em;
            cursor: pointer;
          }
          button.copy-code:active{
            top:0.1em;
          }
          
          pre:hover button.copy-code{
            display: inline-block !important;
          }
          button.copy-code.copied {
            cursor: default !important;
          }
          
          
          @media all and (max-width:30em){
            button.copy-code{
              display:block;
              margin:0.4em auto;
            }
          }
        
        
      </style></head>
<body id="dsu-crccalculate-function">
<h1 class="title topictitle1" id="ariaid-title1">DSU_CRCCalculate Function</h1><div class="body"></div>
<div class="topic nested1" aria-labelledby="ariaid-title2" id="c"><h2 class="title topictitle2" id="ariaid-title2">C</h2><div class="body"><pre class="pre codeblock language-c"><button title="Copy Code" class="copy-code" onclick="cpy('d413555e14', this);">Copy</button><code id="d413555e14" content="bool DSU_CRCCalculate(uint32_t startAddress, size_t length, uint32_t crcSeed, uint32_t * crc);">bool <span class="ph token function">DSU_CRCCalculate</span><span class="ph token punctuation">(</span>uint32_t startAddress<span class="ph token punctuation">,</span> size_t length<span class="ph token punctuation">,</span> uint32_t crcSeed<span class="ph token punctuation">,</span> uint32_t <span class="ph token operator">*</span> crc<span class="ph token punctuation">)</span><span class="ph token punctuation">;</span></code></pre></div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title3" id="summary"><h2 class="title topictitle2" id="ariaid-title3">Summary</h2><div class="body"><p class="p">Calculates the CRC Value for the specified address range.</p>
</div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title4" id="description"><h2 class="title topictitle2" id="ariaid-title4">Description</h2><div class="body"><p class="p">This function uses the hardware CRC computation feature of the DSU to calculate the CRC on a memory block. The start address and the size of the memory block are specified by startAddress and the length parameters.</p>
<p class="p">If this is the first block, the value of the crcSeed parameter should be 0xFFFFFFFF. For calculating the CRC of non-contiguous memory blocks, the CRC result from the CRC calculation of a previous memory block can be passed as the crcSeed to the CRC calculation of the next memory block.</p>
<p class="p">The calculated CRC is returned in the crc parameter. This should be inverted to match standard CRC implementations. It should be kept non-inverted if used as a starting point for subsequent CRC calculations.</p>
</div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title5" id="precondition"><h2 class="title topictitle2" id="ariaid-title5">Precondition</h2><div class="body"><p class="p">None.</p>
</div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title6" id="parameters"><h2 class="title topictitle2" id="ariaid-title6">Parameters</h2><div class="body">
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><col style="width:" /><col style="width:" /><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="text-align:left;vertical-align:middle;" id="d413555e70"><span>Param</span></th>
<th class="entry cellrowborder" style="text-align:left;vertical-align:middle;" id="d413555e72"><span>Description</span></th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d413555e70 "><span>startAddress</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d413555e72 "><span>the starting location of the memory block on which the CRC calculation needs to be performed. This needs to be aligned on a 4 byte boundary.</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d413555e70 "><span>length</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d413555e72 "><span>size of the memory block.</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d413555e70 "><span>crcSeed</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d413555e72 "><span>Initial crcSeed value. This should be 0xFFFFFFFF for the first block. CRC values from the previous calculations can be passed as the CRC seed for next calculation while calculating CRC of separate CRC blocks.</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d413555e70 "><span>crc</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d413555e72 "><span>pointer to the return parameter where the calculated CRC result is stored. This should be inverted to match standard CRC implementations. This should be kept non-inverted if used a starting point for subsequent CRC calculations.</span></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title7" id="returns"><h2 class="title topictitle2" id="ariaid-title7">Returns</h2><div class="body"><p class="p"><em class="ph i">true</em> - The CRC was calculated successfully.</p>
<p class="p"><em class="ph i">false</em> - A fault occurred while calculating the CRC.</p>
</div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title8" id="example"><h2 class="title topictitle2" id="ariaid-title8">Example</h2><div class="body"><pre class="pre codeblock language-c"><button title="Copy Code" class="copy-code" onclick="cpy('d413555e111', this);">Copy</button><code id="d413555e111" content="// Calculate the CRC of a memory block starting 0x30000 and 1024 bytes.&#xA;bool crcStatus;&#xA;uint32_t crcResult;&#xA;crcstatus = DSU_CRCCalculate((uint32_t)(0x30000), 1024, 0xFFFFFFFF, &amp;crcResult);&#xA;&#xA;if(crcStatus == true)&#xA;{&#xA;    // This is the standard CRC result.&#xA;    crcResult = ~crcResult;&#xA;}"><span class="ph token comment">// Calculate the CRC of a memory block starting 0x30000 and 1024 bytes.</span>
bool crcStatus<span class="ph token punctuation">;</span>
uint32_t crcResult<span class="ph token punctuation">;</span>
crcstatus <span class="ph token operator">=</span> <span class="ph token function">DSU_CRCCalculate</span><span class="ph token punctuation">(</span><span class="ph token punctuation">(</span>uint32_t<span class="ph token punctuation">)</span><span class="ph token punctuation">(</span><span class="ph token number">0x30000</span><span class="ph token punctuation">)</span><span class="ph token punctuation">,</span> <span class="ph token number">1024</span><span class="ph token punctuation">,</span> <span class="ph token number">0xFFFFFFFF</span><span class="ph token punctuation">,</span> <span class="ph token operator">&amp;</span>crcResult<span class="ph token punctuation">)</span><span class="ph token punctuation">;</span>

<span class="ph token keyword">if</span><span class="ph token punctuation">(</span>crcStatus <span class="ph token operator">==</span> true<span class="ph token punctuation">)</span>
<span class="ph token punctuation">{</span>
    <span class="ph token comment">// This is the standard CRC result.</span>
    crcResult <span class="ph token operator">=</span> <span class="ph token operator">~</span>crcResult<span class="ph token punctuation">;</span>
<span class="ph token punctuation">}</span></code></pre><pre class="pre codeblock language-c"><button title="Copy Code" class="copy-code" onclick="cpy('d413555e191', this);">Copy</button><code id="d413555e191" content="// Calculate the CRC of multiple but separate blocks. Return status is&#xA;// ignored in this example. Note how the intermediate result is not&#xA;// inverted but the final result is.&#xA;&#xA;bool crcStatus;&#xA;uint32_t crcResult, tempResult;&#xA;&#xA;DSU_CRCCalculate((uint32_t)(0x30000), 1024, 0xFFFFFFFF, &amp;tempResult);&#xA;DSU_CRCCalculate((uint32_t)(0x31000), 1024, tempResult, &amp;crcResult);&#xA;&#xA;crcResult = ~crcResult;&#xA;"><span class="ph token comment">// Calculate the CRC of multiple but separate blocks. Return status is</span>
<span class="ph token comment">// ignored in this example. Note how the intermediate result is not</span>
<span class="ph token comment">// inverted but the final result is.</span>

bool crcStatus<span class="ph token punctuation">;</span>
uint32_t crcResult<span class="ph token punctuation">,</span> tempResult<span class="ph token punctuation">;</span>

<span class="ph token function">DSU_CRCCalculate</span><span class="ph token punctuation">(</span><span class="ph token punctuation">(</span>uint32_t<span class="ph token punctuation">)</span><span class="ph token punctuation">(</span><span class="ph token number">0x30000</span><span class="ph token punctuation">)</span><span class="ph token punctuation">,</span> <span class="ph token number">1024</span><span class="ph token punctuation">,</span> <span class="ph token number">0xFFFFFFFF</span><span class="ph token punctuation">,</span> <span class="ph token operator">&amp;</span>tempResult<span class="ph token punctuation">)</span><span class="ph token punctuation">;</span>
<span class="ph token function">DSU_CRCCalculate</span><span class="ph token punctuation">(</span><span class="ph token punctuation">(</span>uint32_t<span class="ph token punctuation">)</span><span class="ph token punctuation">(</span><span class="ph token number">0x31000</span><span class="ph token punctuation">)</span><span class="ph token punctuation">,</span> <span class="ph token number">1024</span><span class="ph token punctuation">,</span> tempResult<span class="ph token punctuation">,</span> <span class="ph token operator">&amp;</span>crcResult<span class="ph token punctuation">)</span><span class="ph token punctuation">;</span>

crcResult <span class="ph token operator">=</span> <span class="ph token operator">~</span>crcResult<span class="ph token punctuation">;</span>
</code></pre></div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title9" id="remarks"><h2 class="title topictitle2" id="ariaid-title9">Remarks</h2><div class="body"><p class="p">None.</p>
</div>
</div>
</body>
</html>