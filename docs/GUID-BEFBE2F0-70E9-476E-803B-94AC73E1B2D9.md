# Reset Controller \(RSTC\)

\[/topic/body/align \{"- topic/align "\}\) The Reset Controller \(RSTC\), driven by power-on reset \(POR\) cells, software, external reset pin and peripheral events, handles all the resets of the system without any external components. It reports which reset occurred last. The RSTC also drives simultaneously the external reset and the peripheral and processor resets. \(align\]

-   Driven by Embedded Poweron Reset, Software, External Reset Pin<br />and Peripheral Events

-   Management of All System Resets, Including

    -   External Devices through an I/O Multiplexed Output Reset Pin

    -   Processor

    -   Peripheral Set

-   Reset Source Status

    -   Status of the Last Reset

    -   Either VDDCORE, VDDIN33 and VDDBU POR Reset, Software Reset, User<br />Reset, Watchdog Reset, 32.768 kHz Crystal Oscillator Failure Detection<br />Reset, CPU Clock Failure Detection

-   External Reset Signal Control and Shaping


**Using The Library**

The reset controller \(RSTC\) peripheral library provides API to find the<br />cause of last device reset.

**RSTC for LED Switcher:**

```c
void rstcCallback( uintptr_t context )

{

 (void) context;

 msgId = MsgRstcResetInterruptOccurred;

 if( LedBlueSolid == ledColorType )

 {

 ledColorType = LedGreenSolid;

 }

 else

 {

 ledColorType = LedBlueSolid;

 }

}



void ledUpdate( void )

{

LED_GREEN_Toggle();

}



int main( void )

{

 /* Initialize all modules */

 SYS_Initialize( NULL );



 RSTC_CallbackRegister(rstcCallback, (uintptr_t) NULL );



 ledColorType = LedGreenFlash;



 msgId = MsgBannerBreak;

 showMsg();

 msgId = MsgBannerTitle;

 showMsg();

 msgId = MsgBannerBreak;

 showMsg();

 msgId = MsgSw3Prompt;

 showMsg();

 msgId = MsgInputResult;

 showMsg();



 while( 1 )

 {

 ledUpdate();

 showMsg();

 }



 /* Execution should not come here during normal operation */

 return( EXIT_FAILURE );

}
```

**Library Interface**

Reset Controller peripheral library provides the following interfaces:

**Functions**

|Name|Description|
|----|-----------|
|RSTC\_Initialize|Initializes RSTC module with the user configuration|
|RSTC\_Reset|Resets the processor and all the embedded peripherals, if RSTC\_RESET type is "RSTC\_RESET\_PROC ". Asserts the NRST pin, if RSTC\_RESET type is "RSTC\_RESET\_EXT "|
|RSTC\_NRSTPinRead|This API used to read the NRST pin level, sampled on each "Master Clock\(MCK\)" rising edge|
|RSTC\_ResetCauseGet|Reports the cause of the last reset|
|RSTC\_CallbackRegister|Allows a client to identify a callback function|

**Data types and constants**

|Name|Type|Description|
|----|----|-----------|
|RSTC\_RESET\_CAUSE|Struct|Identifiers for the cause of reset|
|RSTC\_RESET\_TYPE|Enum|Identifiers for the type of reset to perform|
|RSTC\_CALLBACK|Typedef|RSTC Callback Function Pointer|

-   **[RSTC\_Initialize Function](GUID-9F9C37D1-8DF7-4E31-935E-C9A1DC991900.md)**  

-   **[RSTC\_Reset Function](GUID-9BEACE0E-9460-4576-8C3B-4640EDAF4DBC.md)**  

-   **[RSTC\_NRSTPinRead Function](GUID-0B5C7B32-504C-433A-8C33-A4976BEEF7F7.md)**  

-   **[RSTC\_ResetCauseGet Function](GUID-F9114EE2-02F3-4B3A-9AB7-567D398A3B22.md)**  

-   **[RSTC\_CallbackRegister Function](GUID-EBD5763B-8540-49A2-B995-CCADB3D402A9.md)**  

-   **[RSTC\_RESET\_CAUSE Typedef](GUID-ACBA10AD-C6BE-417C-A742-1D64D99C9F37.md)**  

-   **[RSTC\_RESET\_TYPE Enum](GUID-A2274586-57AF-4B9D-BC8F-6D9203492AAA.md)**  

-   **[RSTC\_CALLBACK Typedef](GUID-3AFE0DAE-A3B9-489C-BB13-E217E6874368.md)**  


**Parent topic:**[SAM 9X60 Peripheral Libraries](GUID-CCAAC7F0-6BA8-4630-91AE-69718D188CBF.md)

**Parent topic:**[SAM 9X7 Peripheral Libraries](GUID-FB6741AA-355E-483F-9727-37728953D583.md)

**Parent topic:**[SAM A7G5 Peripheral Libraries](GUID-7EEB1AC5-4BFF-4259-97AD-8CF7367D7973.md)

