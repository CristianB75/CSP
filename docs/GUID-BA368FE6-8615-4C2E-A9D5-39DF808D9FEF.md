# Random Number Generator \(RNG\)

The RNG peripheral contains two internal blocks namely TRNG \(True Random Number Generator\) and PRNG \(Pseudo-Random Number Generator\).

TRNG can be used for generating seed for the PRNG. The peripheral can generate random numbers of up to 64-bits length. This peripheral does not have interrupt generation capability.

**Using The Library**

RNG Peripheral library provides API's that can be used to perform below functionalities on the RNG peripheral.

-   Initialize the RNG

-   Enable/Disable the TRNG and PRNG blocks inside the RNG peripheral

-   Read/Write the seed, polynomial and the generated random number.

-   To check whether the number of valid bits in RNGSEEDx reached the required bit length for PRNG seed.


The example code below demonstrates how to generate True Random Number and Pseudo Random Number using RNG peripheral.

```c
uint32_t true_rand_num[2];
uint32_t pseudo_rand_num[2];

int main ( void )
{
    /* Initialize all modules */
    SYS_Initialize ( NULL );

    /* Enable TRNG */
    RNG_TrngEnable();

    RNG_WaitForTrngCnt();

    true_rand_num[0] = RNG_Seed1Get();
    true_rand_num[1] = RNG_Seed2Get();

    printf("\r\nSeed available in TRNG 0x%x%x", true_rand_num[1], true_rand_num[0]);

    /* Prepare PRNG to get seed from TRNG */
    RNG_LoadSet();
    RNG_Poly1Set(0x00C00003);
    RNG_PrngEnable();

    /* Wait for at least 64 clock cycles */
    CORETIMER_DelayUs(1);

    pseudo_rand_num[0] = RNG_NumGen1Get();
    pseudo_rand_num[1] = RNG_NumGen2Get();

    RNG_PrngDisable();

    printf("\r\nGenerated 64-bit Pseudo-Random Number 0x%x%x\r\n", pseudo_rand_num[1], pseudo_rand_num[0]);

    while(true)
    {
    }

    /* Execution should not come here during normal operation */

    return ( EXIT_FAILURE );
}
```

**Library Interface**

Random Number Generator peripheral library provides the following interfaces:

**Functions**

|Name|Description|
|----|-----------|
|RNG\_Initialize|Initializes RNG module of the device|
|RNG\_TrngEnable|Enables the TRNG block inside the RNG peripheral|
|RNG\_TrngDisable|Disables the TRNG block inside the RNG peripheral|
|RNG\_WaitForTrngCnt|Waits for RNGCNT to reach the number of bits required for the PRNG seed|
|RNG\_Seed1Get|Returns the content of RNGSEED1 register|
|RNG\_Seed2Get|Returns the content of RNGSEED2 register|
|RNG\_PrngEnable|Enables the PRNG block inside the RNG peripheral|
|RNG\_PrngDisable|Disables the PRNG block inside the RNG peripheral|
|RNG\_LoadSet|Sets the LOAD bit in RNGCON register|
|RNG\_LoadGet|Returns the LOAD bit value in RNGCON register|
|RNG\_Poly1Set|Loads a value into the RNGPOLY1 register|
|RNG\_Poly2Set|Loads a value into the RNGPOLY2 register|
|RNG\_Poly1Get|Returns the value of the RNGPOLY1 register|
|RNG\_Poly2Get|Returns the value of the RNGPOLY2 register|
|RNG\_NumGen1Set|Loads a value into the RNGNUMGEN1 register|
|RNG\_NumGen2Set|Loads a value into the RNGNUMGEN2 register|
|RNG\_NumGen1Get|Returns the value in the RNGNUMGEN1 register|
|RNG\_NumGen2Get|Returns the value in the RNGNUMGEN2 register|

-   **[RNG\_Initialize Function](GUID-05527E0D-167A-4A21-83EF-931D5EF3C414.md)**  

-   **[RNG\_TrngEnable Function](GUID-D8334D3D-6A06-4505-AE70-9733049D2756.md)**  

-   **[RNG\_TrngDisable Function](GUID-7F12E1F0-C1B6-4A3D-A18F-2FE83E4205F4.md)**  

-   **[RNG\_WaitForTrngCnt Function](GUID-9A615934-0C0E-4B0B-B27D-06E53E78AD3C.md)**  

-   **[RNG\_Seed1Get Function](GUID-227FCCB0-55A3-4EC4-9AF4-2FFFF10412D8.md)**  

-   **[RNG\_Seed2Get Function](GUID-8CCCA69F-17F5-4C16-8C77-0DBC42A9805E.md)**  

-   **[RNG\_PrngEnable Function](GUID-6EC9D5CB-6CAE-4FCD-A0CF-BB0645FFB2AD.md)**  

-   **[RNG\_PrngDisable Function](GUID-45773F43-CD37-4E36-AB45-56391FD1EA60.md)**  

-   **[RNG\_LoadSet Function](GUID-FCCF2EB5-9126-4B8E-85D5-87C762C04C88.md)**  

-   **[RNG\_LoadGet Function](GUID-804C1BDD-68E8-4C8D-9699-8A485DBA09B0.md)**  

-   **[RNG\_Poly1Set Function](GUID-5C0649A6-7383-41C9-8CCC-B2CFDA65540D.md)**  

-   **[RNG\_Poly2Set Function](GUID-2A320C2B-1D3B-479F-854C-51A78E7FC0A5.md)**  

-   **[RNG\_Poly1Get Function](GUID-BDBC77CB-21CC-442B-86DF-BD135F7E64D0.md)**  

-   **[RNG\_Poly2Get Function](GUID-E01CC286-F962-4702-A25A-AFDB1D32BC9F.md)**  

-   **[RNG\_NumGen1Set Function](GUID-8F6CCDDC-7562-4E05-9E94-77CB77840AA4.md)**  

-   **[RNG\_NumGen2Set Function](GUID-632AB39D-389E-473C-91F0-C9BBAA036320.md)**  

-   **[RNG\_NumGen1Get Function](GUID-F775EA8E-02DB-459F-AF84-AE5A93EE4459.md)**  

-   **[RNG\_NumGen2Get Function](GUID-E12881F3-92BF-4310-8AAF-C00EC5431F91.md)**  


**Parent topic:**[PIC32MZ DA Peripheral Libraries](GUID-02A4B196-FE06-48DB-BC12-D3A68B6D983E.md)

**Parent topic:**[PIC32MZ EF Peripheral Libraries](GUID-F47955F5-89DE-43B0-8C2C-DE0070EBA152.md)

