# Peripheral Access Controller \(PAC\)

The Peripheral Access Controller \(PAC\) provides interface to protect write access to a peripheral's registers to minimize risk of unintended configuration changes as a result of run-away code.

The peripheral registers that can be protected is denoted by the "PAC Write-Protection" property in each individual register description.

**Using The Library**

The Peripheral Access Controller \(PAC\) provides interface to protect write access to a peripheral's registers to minimize risk of unintended configuration changes as a result of run-away code. The Following operations are provided to manage the peripheral access.

-   **Clear Protection:**

    -   This operation will remove the write access protection for the selected peripheral to enable write access

-   **Set Protection:**

    -   This operation will set the write access protection for the selected peripheral to disable write access.

-   **Set and Lock Protection:**

    -   This operation will set the write access protection for the selected peripheral to disable write access and locks the access rights of the selected peripheral registers.

    -   The write access protection will only be cleared by a hardware reset.


In an application where write protection is also modified in main and interrupt context, the interrupts must be disabled so that the interrupt can not happen while the main application manipulate the write protection status.

The registered callback function will be called when Peripheral Access Error occurs due to the following:

-   If a peripheral is write protected and if a write access is attempted, data will not be written and peripheral returns an access error.

-   Attempting to set protection for the peripheral that is already set or attempting to clear protection for the peripheral that is already cleared. This is a safety feature to ensure correct program execution sequence to clear and set the protection.

-   Access to an unimplemented register within the module.

-   For write-synchronized registers an error will be reported if the register is written while a synchronization is ongoing.


The example code below demonstrates how to Clear/Set protection for DSU peripheral using PAC.

```c
bool status = false;

status = PAC_PeripheralIsProtected(PAC_PERIPHERAL_DSU);

if (status == true)
{
    PAC_PeripheralProtectSetup(PAC_PERIPHERAL_DSU, PAC_PROTECTION_CLEAR);
}
else
{
    PAC_PeripheralProtectSetup(PAC_PERIPHERAL_DSU, PAC_PROTECTION_SET);
}
```

**Library Interface**

Peripheral Access Controller peripheral library provides the following interfaces:

**Functions**

|Name|Description|
|----|-----------|
|PAC\_Initialize|Initializes given instance of PAC peripheral|
|PAC\_PeripheralIsProtected|Returns PAC protection status of peripheral|
|PAC\_PeripheralProtectSetup|This function configures PAC protection for the specified peripheral|
|PAC\_CallbackRegister|Registers the function to be called when a PAC error has occurred|

**Data types and constants**

|Name|Type|Description|
|----|----|-----------|
|PAC\_PERIPHERAL|Enum|List of available Peripheral module on which errors will be detected|
|PAC\_PROTECTION|Enum|List of available Peripheral Access Control Operations|
|PAC\_CALLBACK|Typedef|Defines the data type and function signature for the PAC peripheral callback function|

-   **[PAC\_Initialize Function](GUID-15561185-6F82-4C13-9268-BED362C16927.md)**  

-   **[PAC\_PeripheralIsProtected Function](GUID-8F942DC4-C82E-426F-B221-10D20CC06E5D.md)**  

-   **[PAC\_PeripheralProtectSetup Function](GUID-E8708A60-048B-4122-AEA9-9F8153E1B3EF.md)**  

-   **[PAC\_CallbackRegister Function](GUID-B07DB232-7B3B-49E8-8C63-3BEC9DA0EC4A.md)**  

-   **[PAC\_PERIPHERAL Enum](GUID-4A640B9C-76F9-45D2-BD88-4639708BA1FD.md)**  

-   **[PAC\_PROTECTION Enum](GUID-0AAD51DE-6F3E-4C59-A036-5527CBDAF7B7.md)**  

-   **[PAC\_CALLBACK Typedef](GUID-2B7E2640-D451-4587-A089-890C758AF7F1.md)**  


**Parent topic:**[PIC32CM JH00 JH01 Peripheral Libraries](GUID-05924E45-D6B3-4F33-A5EA-9B080FC421D8.md)

**Parent topic:**[PIC32CM LE00 LS00 LS60 Peripheral Libraries](GUID-F80F1B47-C3E4-4803-ACB6-D30AC5EB7B45.md)

**Parent topic:**[PIC32CM MC00 Peripheral Libraries](GUID-ADF45DC0-B32C-4D1F-9332-59EC0DF5097E.md)

**Parent topic:**[PIC32CX BZ2 WBZ45 Peripheral Libraries](GUID-3D519D00-FDEE-4A3E-9EF7-20F335E64CEE.md)

**Parent topic:**[PIC32CX BZ3 WBZ3 Peripheral Libraries](GUID-5752DD6D-6E5D-484D-B564-DA87788492F3.md)

**Parent topic:**[PIC32CZ-CA Peripheral Libraries](GUID-7EAC3718-3D58-4007-AB2A-A0E3C167A2DF.md)

**Parent topic:**[SAM C20 C21 Peripheral Libraries](GUID-49072E61-B7F2-4B32-952E-D6F5FB361AFB.md)

**Parent topic:**[SAM D51 E51 E53 E54 Peripheral Libraries](GUID-E33B93DD-6680-477E-AA96-966208DC9A50.md)

**Parent topic:**[SAM L1X Peripheral Libraries](GUID-D259BBBC-6BC2-4F69-849B-C06DF4DDD5F8.md)

**Parent topic:**[SAM L21 Peripheral Libraries](GUID-230EF724-3CDA-4F88-8E42-0EF4C1CA112D.md)

**Parent topic:**[SAM L22 Peripheral Libraries](GUID-C3997EBF-87A0-4DD9-BCB0-C8A58B62E44B.md)

