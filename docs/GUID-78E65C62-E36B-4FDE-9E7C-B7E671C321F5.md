# Supply Controller \(SUPC\)

The Supply Controller \(SUPC\) controls the supply voltages of the<br />system. The SUPC also generates the slow clock by selecting either the low-power RC oscillator or the low-power crystal oscillator.

**Using The Library**

SUPC Peripheral library provides API's and they can be used to perform<br />below functionalities.

-   To put the device either in Sleep, Backup or Wait mode.

-   To read and write the General Purpose Backup Register \(GPBR\).

-   Generate supply monitor callback to save critical data to prepare the system for a power down. Supply monitor can generate interrupt or Reset the device when supply voltage crosses below the specified threshold level.


The examples shows the code to enter sleep, backup and wait mode.

```c
while(1)
{
    switch(cmd)
    {
        case SLEEP_MODE:
        {
            SUPC_SleepModeEnter();
            break;
        }
        case WAIT_MODE:
        {
            SUPC_WaitModeEnter(PMC_FSMR_FLPM_FLASH_DEEP_POWERDOWN, WAITMODE_WKUP_RTC);
            break;
        }
        case BACKUP_MODE:
        {
            SUPC_BackupModeEnter();
            break;
        }
    }
}

```

**Library Interface**

Supply Controller peripheral library provides the following interfaces:

**Functions**

|Name|Description|
|----|-----------|
|SUPC\_Initialize|Initializes SUPC x module of the device|
|SUPC\_SleepModeEnter|Puts the device into Sleep mode|
|SUPC\_WaitModeEnter|Puts the device into Wait mode|
|SUPC\_BackupModeEnter|Puts the device into Backup mode|
|SUPC\_GPBRRead|Reads the data from General Purpose Backup Register\(GPBR\)|
|SUPC\_GPBRWrite|Writes data to the General Purpose Backup Register\(GPBR\)|
|SUPC\_CallbackRegister|Allows application to register callback with PLIB|

**Data types and constants**

|Name|Type|Description|
|----|----|-----------|
|WAITMODE\_WKUP\_SOURCE|Enum|Identifies the wakeup input source|
|WAITMODE\_FLASH\_STATE|Enum|Identifies Flash Low-power mode|
|GPBR\_REGS\_INDEX|Enum|GPBR registers index|
|SUPC\_CALLBACK|Typedef|Pointer to a SUPC callback function|

-   **[SUPC\_Initialize Function](GUID-D18356A1-3487-41FC-A6AA-5E425483A02C.md)**  

-   **[SUPC\_SleepModeEnter Function](GUID-288D82EB-F988-42B3-99DF-4E530D969731.md)**  

-   **[SUPC\_WaitModeEnter Function](GUID-EC8B2ACF-DA5F-4FC6-864F-19C696FFF5B2.md)**  

-   **[SUPC\_BackupModeEnter Function](GUID-B383B5E5-3D03-4190-AF66-703057BE29CD.md)**  

-   **[SUPC\_GPBRRead Function](GUID-20AC2BE9-89F9-4C9B-B1EB-7C923F89A04D.md)**  

-   **[SUPC\_GPBRWrite Function](GUID-77939506-0428-487A-812F-15C69EAA48A2.md)**  

-   **[SUPC\_CallbackRegister Function](GUID-9DDB551B-8196-4BD4-8E80-9F9FD071D4A1.md)**  

-   **[WAITMODE\_WKUP\_SOURCE Enum](GUID-208FE735-BC79-4BBF-9B42-F2C7C2CEE474.md)**  

-   **[WAITMODE\_FLASH\_STATE Enum](GUID-D8F21CB2-0A33-4787-B572-4726987AC700.md)**  

-   **[GPBR\_REGS\_INDEX Enum](GUID-30C81C59-CC49-4BD4-A289-9391C4909528.md)**  

-   **[SUPC\_CALLBACK Typedef](GUID-41D864D4-CCC8-4680-8EFF-A98F2BA14108.md)**  


**Parent topic:**[PIC32CX MT Peripheral Libraries](GUID-EEA7836F-956F-4526-BF85-CD488C4CE708.md)

